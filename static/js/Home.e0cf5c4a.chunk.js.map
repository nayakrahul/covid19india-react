{"version":3,"sources":["components/footer.js","hooks/useresizeobserver.js","components/level.js","components/minigraph.js","components/loaders/mapvisualizer.js","components/maplegend.js","components/mapvisualizer.js","components/tooltips.js","components/mapexplorer.js","components/timeseries.js","components/timeseriesexplorer.js","components/timeline.js","components/updates.js","components/actions.js","components/search.js","components/row.js","components/table.js","hooks/usestickyswr.js","components/home.js"],"names":["React","memo","props","t","useTranslation","className","style","animationDelay","href","target","rel","justifyContent","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","observer","forEach","entry","index","contentRect","observe","unobserve","LevelItem","statistic","total","delta","spring","useSpring","from","config","stiff","Fragment","capitalize","span","interpolate","formatNumber","Math","floor","data","useTrail","transform","opacity","trail","set","PRIMARY_STATISTICS","map","div","key","classnames","getStatistic","prevProps","currProps","equal","timeseries","timelineDate","date","refs","useRef","dates","useMemo","today","getIndiaYesterdayISO","pastDates","Object","keys","filter","cutOffDate","formatISO","subDays","parseIndiaDate","MINIGRAPH_LOOKBACK_DAYS","representation","T","length","margin","chartRight","chartBottom","xScale","d3","clamp","domain","range","dailyMin","dailyMax","max","domainMinMax","yScale","pathLength","svg","color","COLORS","line","curve","x","y","selectAll","join","enter","append","attr","this","getTotalLength","call","transition","delay","duration","update","attrTween","previous","interpolatePath","el","width","height","viewBox","preserveAspectRatio","MapVisualizerLoader","INDIA_ASPECT_RATIO","speed","backgroundColor","cx","cy","r","MapLegend","mapScale","mapOption","svgRef","wrapperRef","getBoundingClientRect","MAP_OPTIONS","HOTSPOTS","D3_TRANSITION_DURATION","select","remove","domainMax","d","copy","tickSize","tickPadding","tickValues","tickFormat","g","title","marginTop","marginRight","marginBottom","marginLeft","ticks","ordinalWeights","tickAdjust","n","min","rangeRound","ramp","toDataURL","interpolator","assign","undefined","round","i","invertExtent","thresholds","quantiles","thresholdFormat","widthScale","reduce","a","b","xPos","w","slice","acc","bandwidth","on","text","node","legend","capitalizeAll","PER_MILLION","TOTAL","Number","isInteger","ZONES","MAP_LEGEND_HEIGHT","id","position","canvas","context","getContext","fillStyle","fillRect","colorInterpolator","confirmed","active","recovered","deceased","tested","getTotalStatistic","normalizer","MapVisualizer","currentMap","changeMap","regionHighlighted","setRegionHighlighted","isCountryLoaded","mapMeta","MAP_META","code","geoDataResponse","useSWR","geoDataFile","file","revalidateOnFocus","suspense","statisticMax","stateCodes","stateCode","includes","view","MAP_VIEWS","STATES","option","STATE_POPULATIONS_MIL","districts","values","districtData","statisticTotal","ZONE_COLORS","nice","geoData","topology","topojson","objects","graphObjectStates","graphObjectDistricts","projection","fitSize","path","features","f","district","properties","state","st_nm","obj","fillColor","STATE_CODES","stateData","zone","strokeColor","onceTouchedRegion","sel","districtName","stopPropagation","mapType","MAP_TYPES","STATE","circlesData","value","UNKNOWN_DISTRICT_KEY","sort","centroid","meshStates","COUNTRY","meshDistricts","DISTRICTS","STATE_NAMES","each","highlighted","parentNode","appendChild","colorInterpolationFilters","type","testedToolTip","onClick","e","data-for","data-tip","data-event","data-event-off","effect","multiline","scrollHide","globalEventOff","anchor","setAnchor","mapStatistic","setMapStatistic","history","useHistory","setWidth","mapExplorerRef","clientWidth","setCurrentMap","currentMapMeta","currentMapData","switchMap","useCallback","newMapMeta","topDistrict","ReactDOM","unstable_batchedUpdates","panelState","produce","draft","hoveredRegion","hoveredData","name","population_millions","springs","useSprings","MAP_STATISTICS","tension","stickied","hidden","window","innerWidth","action","focused","h1","h6","formatDate","meta","source","push","formatLastUpdated","fallback","handleTabClick","TT","chartType","isUniform","isLog","highlightedDate","setHighlightedDate","numTicksX","xAxis","xAxis2","yAxis","uniformScaleMin","uniformScaleMax","yScaleUniformLinear","yScaleUniformLog","mousemove","xm","invert","bisectDate","left","mouseout","TIMESERIES_STATISTICS","generateYScale","getStatisticDelta","deltaToday","yesterday","element","TIMESERIES_OPTIONS","MONTH","timeseriesOption","setTimeseriesOption","useLocalStorage","setChartType","setIsUniform","setIsLog","explorerElement","isVisible","useIsVisible","once","TWO_WEEKS","sub","weeks","months","display","TIMESERIES_CHART_TYPES","ctype","htmlFor","checked","aria-label","onChange","disabled","selected","size","setIsTimelineMode","setDate","useMeasure","timelineElement","setIndex","bind","useDrag","down","xDelta","xDir","direction","distance","cancel","clampedIndex","getClampedIndex","setClampedDate","hideTimeline","setSprings","handleKeyPress","useKeyPressEvent","setTimeout","getDate","format","Date","timeline","useTransition","hasOwnProperty","leave","handleClick","item","h5","newDate","currentDate","Updates","updates","useLayoutEffect","reverse","activity","replace","activityDate","timestamp","formatDistance","dangerouslySetInnerHTML","__html","showUpdates","setShowUpdates","newUpdate","setNewUpdate","lastViewedLog","setLastViewedLog","isTimelineMode","fetcher","lastTimestamp","minHeight","ActionsPanel","Bell","BellOff","TimelineIcon","xmlns","fillRule","mass","friction","to","o","pointerEvents","utcToZonedTime","parse","getTimeFromMilliseconds","engine","Bloodhound","initialize","local","STATE_CODES_ARRAY","queryTokenizer","tokenizers","whitespace","datumTokenizer","districtEngine","limit","indexRemote","remote","url","response","stateName","essentialsEngine","resources","essentialSuggestions","locationSuggestions","searchValue","setSearchValue","expand","setExpand","results","setResults","searchInput","handleSearch","essentialsSync","datums","result","essentialsObj","nameoftheorganisation","category","website","contact","description","descriptionandorserviceprovided","city","phonenumber","search","stateObj","route","districtObj","setNativeValue","valueSetter","getOwnPropertyDescriptor","prototype","getPrototypeOf","prototypeValueSetter","useDebounce","draftResults","splice","label","onFocus","event","onBlur","ESSENTIALS_CATEGORIES","split","onMouseDown","preventDefault","dispatchEvent","Event","bubbles","suggestion","useBreakpoint","createBreakpoint","L","S","Cell","gentle","DistrictHeaderCell","handleSortClick","sortData","breakpoint","abbreviate","sortColumn","isAscending","DistrictRow","highlightDistrict","draftRegionHighlighted","onMouseEnter","notes","wrap","noDelay","showDistricts","setShowDistricts","setSortData","Chevron","rotateRightDown","rotateDownRight","draftSortData","sortingFunction","districtNameA","districtNameB","localeCompare","highlightState","_setShowDistrict","colSpan","paddingBottom","last_updated","align","XL","StateHeaderCell","handleSort","FineprintTop","stateCodeA","stateCodeB","statisticA","statisticB","wobbly","table","useStickySWR","swrOptions","options","setOptions","args","isValidating","error","rest","useUpdateEffect","draftOptions","initialData","Home","revalidateOnMount","refreshInterval","homeRightElement","Set","Helmet","content"],"mappings":"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","file":"static/js/Home.e0cf5c4a.chunk.js","sourcesContent":["import React from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\n\nfunction Footer(props) {\n  const {t} = useTranslation();\n\n  return (\n    <footer className=\"fadeInUp\" style={{animationDelay: '2s'}}>\n      <h5>{t('We stand with everyone fighting on the frontlines')}</h5>\n\n      <div className=\"link\">\n        <a\n          href=\"https://github.com/covid19india\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          covid19india\n        </a>\n      </div>\n\n      <a\n        href=\"https://github.com/covid19india/covid19india-react\"\n        className=\"button github\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.GitHub />\n        <span>{t('Open Sourced on GitHub')}</span>\n      </a>\n\n      <a\n        className=\"button excel\"\n        href=\"http://patientdb.covid19india.org\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.Database />\n        <span>{t('Crowdsourced Patient Database')}</span>\n      </a>\n\n      <a\n        href=\"https://twitter.com/covid19indiaorg\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"button twitter\"\n        style={{justifyContent: 'center'}}\n      >\n        <Icon.Twitter />\n        <span>{t('View updates on Twitter')}</span>\n      </a>\n\n      <a\n        href=\"https://bit.ly/covid19crowd\"\n        className=\"button telegram\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.MessageCircle />\n        <span>{t('Join Telegram to Collaborate!')}</span>\n      </a>\n    </footer>\n  );\n}\n\nexport default React.memo(Footer);\n","import {ResizeObserver} from '@juggle/resize-observer';\nimport {useState, useEffect} from 'react';\n\nexport const useResizeObserver = (ref) => {\n  const [dimensions, setDimensions] = useState(null);\n  useEffect(() => {\n    const observeTarget = ref.current;\n    const resizeObserver = new ResizeObserver((entries, observer) => {\n      entries.forEach((entry, index) => {\n        setDimensions(entry.contentRect);\n      });\n    });\n    resizeObserver.observe(observeTarget);\n    return () => {\n      resizeObserver.unobserve(observeTarget);\n    };\n  }, [ref]);\n  return dimensions;\n};\n\nexport default useResizeObserver;\n","import {PRIMARY_STATISTICS} from '../constants';\nimport {capitalize, formatNumber, getStatistic} from '../utils/commonfunctions';\n\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport React from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {animated, useSpring, config, useTrail} from 'react-spring';\n\nfunction PureLevelItem({statistic, total, delta}) {\n  const {t} = useTranslation();\n  const spring = useSpring(\n    {\n      total: total,\n      delta: delta,\n      from: {total: total, delta: delta},\n    },\n    config.stiff\n  );\n\n  return (\n    <React.Fragment>\n      <h5>{capitalize(t(statistic))}</h5>\n      <h4>\n        <animated.span>\n          {spring.delta.interpolate((delta) =>\n            delta > 0 ? `+${formatNumber(Math.floor(delta))}` : '\\u2764'\n          )}\n        </animated.span>\n      </h4>\n      <h1>\n        <animated.span>\n          {spring.total.interpolate((total) => formatNumber(Math.floor(total)))}\n        </animated.span>\n      </h1>\n    </React.Fragment>\n  );\n}\n\nconst LevelItem = React.memo(PureLevelItem);\n\nfunction Level({data}) {\n  const [trail, set] = useTrail(4, () => ({\n    transform: 'translate3d(0, 20px, 0)',\n    opacity: 0,\n    config: config.stiff,\n  }));\n\n  set({transform: 'translate3d(0, 0px, 0)', opacity: 1});\n\n  return (\n    <div className=\"Level\">\n      {PRIMARY_STATISTICS.map((statistic, index) => (\n        <animated.div\n          key={index}\n          className={classnames('level-item', `is-${statistic}`)}\n          style={trail[index]}\n        >\n          <LevelItem\n            {...{statistic}}\n            total={getStatistic(data, 'total', statistic)}\n            delta={getStatistic(data, 'delta', statistic)}\n          />\n        </animated.div>\n      ))}\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (\n    !equal(\n      getStatistic(prevProps.data, 'total', 'active'),\n      getStatistic(currProps.data, 'total', 'active')\n    )\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(Level, isEqual);\n","import {\n  COLORS,\n  MINIGRAPH_LOOKBACK_DAYS,\n  PRIMARY_STATISTICS,\n} from '../constants';\nimport {\n  getStatistic,\n  getIndiaYesterdayISO,\n  parseIndiaDate,\n} from '../utils/commonfunctions';\n\nimport classnames from 'classnames';\nimport * as d3 from 'd3';\nimport {interpolatePath} from 'd3-interpolate-path';\nimport {formatISO, subDays} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport React, {useEffect, useRef, useMemo} from 'react';\n\nfunction Minigraph({timeseries, date: timelineDate}) {\n  const refs = useRef([]);\n\n  const dates = useMemo(() => {\n    const today = timelineDate || getIndiaYesterdayISO();\n    const pastDates = Object.keys(timeseries || {}).filter(\n      (date) => date <= today\n    );\n    const cutOffDate = formatISO(\n      subDays(parseIndiaDate(today), MINIGRAPH_LOOKBACK_DAYS),\n      {representation: 'date'}\n    );\n    return pastDates.filter((date) => date >= cutOffDate);\n  }, [timeseries, timelineDate]);\n\n  useEffect(() => {\n    const T = dates.length;\n\n    const margin = {top: 10, right: 5, bottom: 20, left: 5};\n    const chartRight = 100 - margin.right;\n    const chartBottom = 100 - margin.bottom;\n\n    const xScale = d3\n      .scaleTime()\n      .clamp(true)\n      .domain([parseIndiaDate(dates[0]), parseIndiaDate(dates[T - 1])])\n      .range([margin.left, chartRight]);\n\n    const dailyMin = d3.min(dates, (date) =>\n      getStatistic(timeseries[date], 'delta', 'active')\n    );\n\n    const dailyMax = d3.max(dates, (date) =>\n      Math.max(\n        getStatistic(timeseries[date], 'delta', 'confirmed'),\n        getStatistic(timeseries[date], 'delta', 'recovered'),\n        getStatistic(timeseries[date], 'delta', 'deceased')\n      )\n    );\n\n    const domainMinMax = Math.max(-dailyMin, dailyMax);\n\n    const yScale = d3\n      .scaleLinear()\n      .clamp(true)\n      .domain([-domainMinMax, domainMinMax])\n      .range([chartBottom, margin.top]);\n\n    refs.current.forEach((ref, index) => {\n      const svg = d3.select(ref);\n      const statistic = PRIMARY_STATISTICS[index];\n      const color = COLORS[statistic];\n\n      const line = d3\n        .line()\n        .curve(d3.curveMonotoneX)\n        .x((date) => xScale(parseIndiaDate(date)))\n        .y((date) =>\n          yScale(getStatistic(timeseries[date], 'delta', statistic))\n        );\n\n      let pathLength;\n      svg\n        .selectAll('path')\n        .data(T ? [dates] : [])\n        .join(\n          (enter) =>\n            enter\n              .append('path')\n              .attr('fill', 'none')\n              .attr('stroke', color + '99')\n              .attr('stroke-width', 2.5)\n              .attr('d', line)\n              .attr('stroke-dasharray', function () {\n                return (pathLength = this.getTotalLength());\n              })\n              .call((enter) =>\n                enter\n                  .attr('stroke-dashoffset', pathLength)\n                  .transition()\n                  .delay(100)\n                  .duration(2500)\n                  .attr('stroke-dashoffset', 0)\n              ),\n          (update) =>\n            update\n              .attr('stroke-dasharray', null)\n              .transition()\n              .duration(500)\n              .attrTween('d', function (date) {\n                const previous = d3.select(this).attr('d');\n                const current = line(date);\n                return interpolatePath(previous, current);\n              })\n        );\n\n      svg\n        .selectAll('circle')\n        .data(T ? [dates[T - 1]] : [])\n        .join(\n          (enter) =>\n            enter\n              .append('circle')\n              .attr('fill', color)\n              .attr('r', 2.5)\n              .attr('cx', (date) => xScale(parseIndiaDate(date)))\n              .attr('cy', (date) =>\n                yScale(getStatistic(timeseries[date], 'delta', statistic))\n              )\n              .style('opacity', 0)\n              .call((enter) =>\n                enter\n                  .transition()\n                  .delay(2100)\n                  .duration(500)\n                  .style('opacity', 1)\n                  .attr('cx', (date) => xScale(parseIndiaDate(date)))\n                  .attr('cy', (date) =>\n                    yScale(getStatistic(timeseries[date], 'delta', statistic))\n                  )\n              ),\n          (update) =>\n            update\n              .transition()\n              .duration(500)\n              .attr('cx', (date) => xScale(parseIndiaDate(date)))\n              .attr('cy', (date) =>\n                yScale(getStatistic(timeseries[date], 'delta', statistic))\n              )\n        );\n    });\n  }, [dates, timeseries]);\n\n  return (\n    <div className=\"Minigraph\">\n      {PRIMARY_STATISTICS.map((statistic, index) => (\n        <div key={statistic} className={classnames('svg-parent')}>\n          <svg\n            ref={(el) => {\n              refs.current[index] = el;\n            }}\n            width=\"100\"\n            height=\"75\"\n            viewBox=\"0 0 100 75\"\n            preserveAspectRatio=\"xMidYMid meet\"\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(Minigraph, isEqual);\n","import {COLORS, INDIA_ASPECT_RATIO} from '../../constants';\n\nimport React from 'react';\nimport ContentLoader from 'react-content-loader';\n\nconst MapVisualizerLoader = ({width, statistic}) => {\n  const height = width / INDIA_ASPECT_RATIO;\n  return (\n    <ContentLoader\n      viewBox={`0 0 ${width} ${height}`}\n      height={height}\n      width={width}\n      speed={2}\n      backgroundColor={COLORS[statistic]}\n    >\n      <circle cx={0.4 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.5 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.6 * width} cy={height / 2} r=\"5\" />\n    </ContentLoader>\n  );\n};\n\nexport default MapVisualizerLoader;\n","import {\n  D3_TRANSITION_DURATION,\n  MAP_LEGEND_HEIGHT,\n  MAP_OPTIONS,\n  // ZONE_COLORS,\n} from '../constants';\nimport {useResizeObserver} from '../hooks/useresizeobserver';\nimport {capitalizeAll, formatNumber} from '../utils/commonfunctions';\n\nimport * as d3 from 'd3';\nimport React, {useEffect, useRef} from 'react';\n\nfunction MapLegend({data, mapScale, mapOption, statistic}) {\n  const svgRef = useRef(null);\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  // const totalZones = useMemo(() => {\n  //   return Object.values(data).reduce(\n  //     (counts, stateData) => {\n  //       if (stateData?.districts) {\n  //         Object.values(stateData.districts).forEach((districtData) => {\n  //           if (districtData?.zone?.status)\n  //             counts[districtData.zone.status] += 1;\n  //         });\n  //       }\n  //       return counts;\n  //     },\n  //     Object.keys(ZONE_COLORS).reduce((count, zone) => {\n  //       count[zone] = 0;\n  //       return count;\n  //     }, {})\n  //   );\n  // }, [data]);\n\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    let {width, height} =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    if (!width || !height)\n      ({width, height} = wrapperRef.current.getBoundingClientRect());\n\n    // if (mapOption === MAP_OPTIONS.ZONES) {\n    //   svg.call(() =>\n    //     legend({\n    //       svg: svg,\n    //       color: mapScale,\n    //       width: width,\n    //       height: height,\n    //       tickValues: [],\n    //       marginLeft: 2,\n    //       marginRight: 20,\n    //       ordinalWeights: Object.values(totalZones),\n    //     })\n    //   );\n    // }\n    if (mapOption === MAP_OPTIONS.HOTSPOTS) {\n      const t = svg.transition().duration(D3_TRANSITION_DURATION);\n      svg\n        .select('.ramp')\n        .transition(t)\n        .attr('opacity', 0)\n        .attr('xlink:href', null);\n\n      svg\n        .select('.bars')\n        .selectAll('rect')\n        .transition(t)\n        .attr('opacity', 0)\n        .remove();\n      svg.selectAll('.axis > *').remove();\n\n      const domainMax = mapScale.domain()[1];\n\n      const legend = svg\n        .select('.circles')\n        .attr('transform', `translate(48,40)`)\n        .attr('text-anchor', 'middle');\n\n      legend\n        .selectAll('circle')\n        .data([domainMax / 10, (domainMax * 2) / 5, domainMax])\n        .join('circle')\n        .attr('fill', 'none')\n        .attr('stroke', '#ccc')\n        .transition(t)\n        .attr('cy', (d) => -mapScale(d))\n        .attr('r', mapScale);\n\n      const yScale = mapScale.copy().range([0, -2 * mapScale(domainMax)]);\n\n      svg\n        .select('.circleAxis')\n        .attr('transform', `translate(48,50)`)\n        .transition(t)\n        .call(\n          d3\n            .axisRight(yScale)\n            .tickSize(0)\n            .tickPadding(0)\n            .tickValues([domainMax / 10, (domainMax * 2) / 5, domainMax])\n            .tickFormat(d3.format('0~s'))\n        )\n        .selectAll('.tick text')\n        .style('text-anchor', 'middle');\n\n      svg.select('.circleAxis').call((g) => g.select('.domain').remove());\n    } else {\n      svg.call(() =>\n        legend({\n          svg: svg,\n          color: mapScale,\n          title:\n            capitalizeAll(statistic) +\n            (mapOption === MAP_OPTIONS.PER_MILLION\n              ? ' cases per million'\n              : ' cases'),\n          width: width,\n          height: height,\n          ticks: 5,\n          tickFormat: function (d, i, n) {\n            if (mapOption === MAP_OPTIONS.TOTAL && !Number.isInteger(d)) return;\n            if (i === n.length - 1) return formatNumber(d) + '+';\n            return formatNumber(d);\n          },\n          marginLeft: 2,\n          marginRight: 20,\n        })\n      );\n    }\n    svg.attr('class', mapOption === MAP_OPTIONS.ZONES ? 'zone' : '');\n  }, [dimensions, mapScale, mapOption, statistic]); // totalZones\n\n  return (\n    <div\n      className=\"svg-parent maplegend\"\n      style={{height: MAP_LEGEND_HEIGHT}}\n      ref={wrapperRef}\n    >\n      <svg id=\"legend\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\n        <image className=\"ramp\" />\n        <g className=\"bars\"></g>\n        <g className=\"circles\"></g>\n        <g className=\"circleAxis\"></g>\n        <g className=\"axis\">\n          <text className=\"axistext\" />\n        </g>\n      </svg>\n      <canvas\n        className=\"color-scale\"\n        style={{position: 'absolute', height: 0}}\n      />\n    </div>\n  );\n}\n\nexport default MapLegend;\n\nfunction legend({\n  svg,\n  color,\n  title,\n  tickSize = 6,\n  width = 320,\n  height = 44 + tickSize,\n  marginTop = 18,\n  marginRight = 0,\n  marginBottom = 16 + tickSize,\n  marginLeft = 0,\n  ticks = width / 64,\n  tickFormat,\n  tickValues,\n  ordinalWeights,\n} = {}) {\n  svg.selectAll('.circles > *').remove();\n  svg.selectAll('.circleAxis > *').remove();\n  const t = svg.transition().duration(D3_TRANSITION_DURATION);\n\n  let tickAdjust = (g) => {\n    const ticks = g.selectAll('.tick line');\n    ticks.attr('y1', marginTop + marginBottom - height);\n    // d3.select(ticks.nodes()[ticks.size() - 1]).remove();\n  };\n  let x;\n\n  // Continuous\n  if (color.interpolate) {\n    const n = Math.min(color.domain().length, color.range().length);\n\n    x = color\n      .copy()\n      .rangeRound(\n        d3.quantize(d3.interpolate(marginLeft, width - marginRight), n)\n      );\n\n    svg\n      .select('.ramp')\n      .attr('class', 'ramp')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr(\n        'xlink:href',\n        ramp(\n          color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))\n        ).toDataURL()\n      );\n  }\n\n  // Sequential\n  else if (color.interpolator) {\n    svg\n      .select('.bars')\n      .selectAll('rect')\n      .transition(t)\n      .attr('opacity', 0)\n      .remove();\n\n    x = Object.assign(\n      color\n        .copy()\n        .interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\n      {\n        range() {\n          return [marginLeft, width - marginRight];\n        },\n      }\n    );\n\n    svg\n      .select('.ramp')\n      .attr('class', 'ramp')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr('xlink:href', ramp(color.interpolator()).toDataURL())\n      .transition(t)\n      .attr('opacity', 1);\n\n    // scaleSequentialQuantile doesn’t implement ticks or tickFormat.\n    if (!x.ticks) {\n      if (tickValues === undefined) {\n        const n = Math.round(ticks + 1);\n        tickValues = d3\n          .range(n)\n          .map((i) => d3.quantile(color.domain(), i / (n - 1)));\n      }\n      if (typeof tickFormat !== 'function') {\n        tickFormat = d3.format(tickFormat === undefined ? ',f' : tickFormat);\n      }\n    }\n  }\n\n  // Threshold\n  else if (color.invertExtent) {\n    const thresholds = color.thresholds\n      ? color.thresholds() // scaleQuantize\n      : color.quantiles\n      ? color.quantiles() // scaleQuantile\n      : color.domain(); // scaleThreshold\n\n    const thresholdFormat =\n      tickFormat === undefined\n        ? (d) => d\n        : typeof tickFormat === 'string'\n        ? d3.format(tickFormat)\n        : tickFormat;\n\n    x = d3\n      .scaleLinear()\n      .domain([-1, color.range().length - 1])\n      .rangeRound([marginLeft, width - marginRight]);\n\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(color.range())\n      .join('rect')\n      .attr('x', (d, i) => x(i - 1))\n      .attr('y', marginTop)\n      .attr('width', (d, i) => x(i) - x(i - 1))\n      .attr('height', height - marginTop - marginBottom)\n      .attr('fill', (d) => d);\n\n    tickValues = d3.range(-1, thresholds.length);\n    tickFormat = (i) => {\n      if (i === -1) return thresholdFormat(1);\n      else if (i === thresholds.length - 1) return;\n      else if (i === thresholds.length - 2)\n        return thresholdFormat(thresholds[i] + '+', i);\n      return thresholdFormat(thresholds[i], i);\n    };\n  }\n\n  // Ordinal\n  else {\n    svg\n      .select('.ramp')\n      .transition(t)\n      .attr('opacity', 0)\n      .attr('xlink:href', null);\n    if (!ordinalWeights) {\n      x = d3\n        .scaleBand()\n        .domain(color.domain())\n        .rangeRound([marginLeft, width - marginRight]);\n      svg\n        .selectAll('rect')\n        .data(color.domain())\n        .join('rect')\n        .attr('x', x)\n        .attr('y', marginTop)\n        .attr('width', Math.max(0, x.bandwidth() - 1))\n        .attr('height', height - marginTop - marginBottom)\n        .attr('fill', color);\n    } else {\n      const widthScale = d3\n        .scaleLinear()\n        .domain([0, ordinalWeights.reduce((a, b) => a + b)])\n        .rangeRound([0, width - marginLeft - marginRight]);\n\n      const xPos = ordinalWeights.map((w, i) =>\n        ordinalWeights\n          .slice(0, i)\n          .reduce((acc, w) => acc + widthScale(w), marginLeft)\n      );\n\n      x = d3.scaleOrdinal().domain(color.domain()).range(xPos);\n\n      svg\n        .select('.bars')\n        .selectAll('rect')\n        .data(color.domain())\n        .join((enter) =>\n          enter\n            .append('rect')\n            .attr('x', x)\n            .attr('width', (d, i) => widthScale(ordinalWeights[i]))\n        )\n        .attr('y', marginTop)\n        .attr('height', height - marginTop - marginBottom)\n        .attr('fill', color)\n        .transition(t)\n        .attr('x', x)\n        .attr('width', (d, i) => widthScale(ordinalWeights[i]))\n        .attr('opacity', 1);\n    }\n\n    tickAdjust = () => {};\n  }\n\n  svg\n    .select('.axis')\n    .attr('transform', `translate(0,${height - marginBottom})`)\n    .transition(t)\n    .attr('class', 'axis')\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(ticks, typeof tickFormat === 'string' ? tickFormat : undefined)\n        .tickFormat(typeof tickFormat === 'function' ? tickFormat : undefined)\n        .tickSize(tickSize)\n        .tickValues(tickValues)\n    )\n    .on('start', () => {\n      svg.call(tickAdjust).call((svg) => svg.select('.domain').remove());\n    })\n    .call((g) =>\n      g\n        .select('.axistext')\n        .attr('class', 'axistext')\n        .attr('x', marginLeft)\n        .attr('y', marginTop + marginBottom - height - 6)\n        .attr('fill', 'currentColor')\n        .attr('text-anchor', 'start')\n        .attr('font-weight', 'bold')\n        .text(title)\n    );\n\n  return svg.node();\n}\n\nfunction ramp(color, n = 256) {\n  // const canvas = document.createElement('canvas');\n  const canvas = d3.select('.color-scale').node();\n  const context = ((canvas.width = n), (canvas.height = 1), canvas).getContext(\n    '2d'\n  );\n  for (let i = 0; i < n; ++i) {\n    context.fillStyle = color(i / (n - 1));\n    context.fillRect(i, 0, 1, 1);\n  }\n  return canvas;\n}\n","import MapLegend from './maplegend';\n\nimport {\n  COLORS,\n  D3_TRANSITION_DURATION,\n  MAP_META,\n  MAP_TYPES,\n  MAP_OPTIONS,\n  MAP_VIEWS,\n  STATE_CODES,\n  STATE_NAMES,\n  STATE_POPULATIONS_MIL,\n  UNKNOWN_DISTRICT_KEY,\n  ZONE_COLORS,\n} from '../constants';\nimport {\n  capitalizeAll,\n  formatNumber,\n  getStatistic,\n} from '../utils/commonfunctions';\n\nimport * as d3 from 'd3';\nimport React, {useEffect, useMemo, useRef} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport useSWR from 'swr';\nimport * as topojson from 'topojson';\n\nconst [width, height] = [432, 488];\n\nconst colorInterpolator = {\n  confirmed: (t) => d3.interpolateReds(t * 0.85),\n  active: (t) => d3.interpolateBlues(t * 0.85),\n  recovered: (t) => d3.interpolateGreens(t * 0.85),\n  deceased: (t) => d3.interpolateGreys(t * 0.85),\n  tested: (t) => d3.interpolatePurples(t * 0.85),\n};\n\nconst getTotalStatistic = (data, statistic, normalizer = 1) => {\n  return getStatistic(data, 'total', statistic, normalizer);\n};\n\nfunction MapVisualizer({\n  currentMap,\n  data,\n  changeMap,\n  regionHighlighted,\n  setRegionHighlighted,\n  statistic,\n  isCountryLoaded,\n}) {\n  const {t} = useTranslation();\n  const svgRef = useRef(null);\n\n  const mapMeta = MAP_META[currentMap.code];\n\n  const geoDataResponse = useSWR(\n    mapMeta.geoDataFile,\n    async (file) => {\n      return await d3.json(file);\n    },\n    {revalidateOnFocus: false, suspense: true}\n  );\n\n  const statisticMax = useMemo(() => {\n    const stateCodes = Object.keys(data).filter(\n      (stateCode) =>\n        stateCode !== 'TT' && Object.keys(MAP_META).includes(stateCode)\n    );\n    return currentMap.view === MAP_VIEWS.STATES\n      ? d3.max(stateCodes, (stateCode) =>\n          getTotalStatistic(\n            data[stateCode],\n            statistic,\n            currentMap.option === MAP_OPTIONS.PER_MILLION\n              ? STATE_POPULATIONS_MIL[stateCode]\n              : 1\n          )\n        )\n      : d3.max(stateCodes, (stateCode) =>\n          data[stateCode]?.districts\n            ? d3.max(Object.values(data[stateCode].districts), (districtData) =>\n                getTotalStatistic(districtData, statistic)\n              )\n            : 0\n        );\n  }, [data, currentMap.option, currentMap.view, statistic]);\n\n  const statisticTotal = useMemo(() => {\n    return getTotalStatistic(\n      data[currentMap.code],\n      statistic,\n      currentMap.option === MAP_OPTIONS.PER_MILLION\n        ? STATE_POPULATIONS_MIL[currentMap.code]\n        : 1\n    );\n  }, [data, currentMap.code, currentMap.option, statistic]);\n\n  const mapScale = useMemo(() => {\n    if (currentMap.option === MAP_OPTIONS.ZONES) {\n      return d3.scaleOrdinal(\n        Object.keys(ZONE_COLORS),\n        Object.values(ZONE_COLORS)\n      );\n    } else if (currentMap.option === MAP_OPTIONS.HOTSPOTS) {\n      return d3\n        .scaleSqrt([0, Math.max(statisticMax, 1)], [0, 40])\n        .clamp(true)\n        .nice(3);\n    } else {\n      return d3\n        .scaleSequential(\n          [0, Math.max(1, statisticMax)],\n          colorInterpolator[statistic]\n        )\n        .clamp(true);\n    }\n  }, [currentMap.option, statistic, statisticMax]);\n\n  useEffect(() => {\n    if (!geoDataResponse.data) return;\n    const geoData = geoDataResponse.data;\n\n    const topology = topojson.feature(\n      geoData,\n      geoData.objects[mapMeta.graphObjectStates || mapMeta.graphObjectDistricts]\n    );\n\n    const svg = d3.select(svgRef.current);\n\n    const projection = d3.geoMercator().fitSize([width, height], topology);\n    const path = d3.geoPath(projection);\n\n    // Add id to each feature\n    let features =\n      currentMap.option !== MAP_OPTIONS.HOTSPOTS\n        ? currentMap.view === MAP_VIEWS.STATES\n          ? topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectStates]\n            ).features\n          : topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectDistricts]\n            ).features\n        : [\n            ...topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectStates]\n            ).features,\n            ...topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectDistricts]\n            ).features,\n          ];\n\n    features = features.map((f) => {\n      const district = f.properties.district;\n      const state = f.properties.st_nm;\n      const obj = Object.assign({}, f);\n      obj.id = `${currentMap.code}-${state}${district ? '-' + district : ''}`;\n      return obj;\n    });\n\n    const fillColor = (d) => {\n      const stateCode = STATE_CODES[d.properties.st_nm];\n      const district = d.properties.district;\n      const stateData = data[stateCode];\n      const districtData = stateData?.districts?.[district];\n      let n;\n      if (currentMap.option === MAP_OPTIONS.ZONES) {\n        n = districtData?.zone || 0;\n      } else {\n        if (district) n = getTotalStatistic(districtData, statistic);\n        else\n          n = getTotalStatistic(\n            stateData,\n            statistic,\n            currentMap.option === MAP_OPTIONS.PER_MILLION\n              ? STATE_POPULATIONS_MIL[stateCode]\n              : 1\n          );\n      }\n      const color = n === 0 ? '#ffffff00' : mapScale(n);\n      return color;\n    };\n\n    const strokeColor = (d) => {\n      return currentMap.option === MAP_OPTIONS.ZONES\n        ? '#343a40'\n        : COLORS[statistic];\n    };\n\n    /* Draw map */\n    const t = d3.transition().duration(D3_TRANSITION_DURATION);\n    let onceTouchedRegion = null;\n    const regionSelection = svg\n      .select('.regions')\n      .selectAll('path')\n      .data(\n        currentMap.option !== MAP_OPTIONS.HOTSPOTS ? features : [],\n        (d) => d.id\n      )\n      .join(\n        (enter) => {\n          const sel = enter\n            .append('path')\n            .attr('d', path)\n            .attr('stroke-width', 1.8)\n            .attr('stroke-opacity', 0)\n            .style('cursor', 'pointer')\n            .on('mouseenter', (d) => {\n              setRegionHighlighted({\n                stateCode: STATE_CODES[d.properties.st_nm],\n                districtName: d.properties.district,\n              });\n            })\n            .on('mouseleave', (d) => {\n              if (onceTouchedRegion === d) onceTouchedRegion = null;\n            })\n            .on('touchstart', (d) => {\n              if (onceTouchedRegion === d) onceTouchedRegion = null;\n              else onceTouchedRegion = d;\n            })\n            .on('click', (d) => {\n              d3.event.stopPropagation();\n              if (onceTouchedRegion || mapMeta.mapType === MAP_TYPES.STATE)\n                return;\n              // Disable pointer events till the new map is rendered\n              svg.attr('pointer-events', 'none');\n              svg\n                .select('.regions')\n                .selectAll('path')\n                .attr('pointer-events', 'none');\n              // Switch map\n              changeMap(STATE_CODES[d.properties.st_nm]);\n            })\n            .attr('fill', fillColor)\n            .attr('stroke', strokeColor);\n          sel.append('title');\n          return sel;\n        },\n        (update) =>\n          update.call((update) =>\n            update\n              .transition(t)\n              .attr('fill', fillColor)\n              .attr('stroke', strokeColor)\n          )\n      )\n      .attr('pointer-events', 'all');\n\n    regionSelection.select('title').text((d) => {\n      if (currentMap.option === MAP_OPTIONS.TOTAL) {\n        const state = d.properties.st_nm;\n        const stateCode = STATE_CODES[state];\n        const district = d.properties.district;\n\n        const stateData = data[stateCode];\n        const districtData = stateData?.districts?.[district];\n        let n;\n        if (district) n = getTotalStatistic(districtData, statistic);\n        else n = getTotalStatistic(stateData, statistic);\n        return (\n          formatNumber(100 * (n / (statisticTotal || 0.001))) +\n          '% from ' +\n          capitalizeAll(district ? district : state)\n        );\n      }\n    });\n\n    svg\n      .transition()\n      .duration(mapMeta.mapType === MAP_TYPES.STATE ? t.duration() / 2 : 0)\n      .on('end', () =>\n        svg.attr('class', currentMap.option === MAP_OPTIONS.ZONES ? 'zone' : '')\n      );\n\n    /* ----------BUBBLE MAP----------*/\n    let circlesData = [];\n    if (currentMap.option === MAP_OPTIONS.HOTSPOTS) {\n      circlesData = features\n        .map((d) => {\n          const stateCode = STATE_CODES[d.properties.st_nm];\n          const district = d.properties.district;\n\n          const stateData = data[stateCode];\n          const districtData = stateData?.districts?.[district];\n          if (district) d.value = getTotalStatistic(districtData, statistic);\n          else\n            d.value = getTotalStatistic(\n              stateData?.districts?.[UNKNOWN_DISTRICT_KEY],\n              statistic\n            );\n          return d;\n        })\n        .sort((a, b) => b.value - a.value);\n    }\n\n    svg\n      .select('.circles')\n      .selectAll('circle')\n      .data(circlesData, (d) => d.id)\n      .join((enter) =>\n        enter\n          .append('circle')\n          .attr('transform', (d) => `translate(${path.centroid(d)})`)\n          .attr('fill-opacity', 0.5)\n          .style('cursor', 'pointer')\n          .attr('pointer-events', 'all')\n          .on('mouseenter', (d) => {\n            setRegionHighlighted({\n              stateCode: STATE_CODES[d.properties.st_nm],\n              districtName: d.properties.district || UNKNOWN_DISTRICT_KEY,\n            });\n          })\n          .on('click', () => {\n            d3.event.stopPropagation();\n          })\n      )\n      .transition(t)\n      .attr('fill', COLORS[statistic] + '70')\n      .attr('stroke', COLORS[statistic] + '70')\n      .attr('r', (d) => mapScale(d.value));\n    /* ------------------------------*/\n\n    let meshStates = [];\n    if (mapMeta.mapType === MAP_TYPES.COUNTRY) {\n      meshStates = [\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectStates]),\n      ];\n      meshStates[0].id = mapMeta.graphObjectStates;\n    }\n    let meshDistricts = [];\n    if (currentMap.view === MAP_VIEWS.DISTRICTS) {\n      // Add id to mesh\n      meshDistricts = [\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectDistricts]),\n      ];\n      meshDistricts[0].id = mapMeta.graphObjectDistricts;\n    }\n\n    svg\n      .select(\n        currentMap.view === MAP_VIEWS.STATES\n          ? '.state-borders'\n          : '.district-borders'\n      )\n      .attr('fill', 'none')\n      .attr('stroke-width', function () {\n        return mapMeta.mapType === MAP_TYPES.COUNTRY &&\n          currentMap.view === MAP_VIEWS.DISTRICTS\n          ? 0\n          : 1.5;\n      })\n      .selectAll('path')\n      .data(\n        currentMap.view === MAP_VIEWS.STATES ? meshStates : meshDistricts,\n        (d) => d.id\n      )\n      .join((enter) => enter.append('path').attr('d', path))\n      .transition(t)\n      .attr('stroke', () => {\n        if (currentMap.option === MAP_OPTIONS.ZONES) {\n          return '#00000060';\n        } else {\n          return COLORS[statistic] + '30';\n        }\n      });\n\n    svg\n      .select(\n        currentMap.view === MAP_VIEWS.STATES\n          ? '.district-borders'\n          : '.state-borders'\n      )\n      .selectAll('path')\n      .data(\n        currentMap.view === MAP_VIEWS.STATES ? meshDistricts : meshStates,\n        (d) => d.id\n      )\n      .join((enter) =>\n        enter\n          .append('path')\n          .attr('d', path)\n          .attr('fill', 'none')\n          .attr('stroke-width', 1.5)\n      )\n      .transition(t)\n      .attr('stroke', '#343a4050');\n\n    // Reset on tapping outside map\n    svg.attr('pointer-events', 'auto').on('click', () => {\n      if (mapMeta.mapType !== MAP_TYPES.STATE) {\n        setRegionHighlighted({\n          stateCode: 'TT',\n          districtName: null,\n        });\n      }\n    });\n  }, [\n    geoDataResponse.data,\n    data,\n    mapMeta,\n    currentMap,\n    setRegionHighlighted,\n    changeMap,\n    isCountryLoaded,\n    mapScale,\n    statistic,\n    statisticTotal,\n  ]);\n\n  useEffect(() => {\n    if (!geoDataResponse.data) return;\n    const state = STATE_NAMES[regionHighlighted.stateCode];\n    const district = regionHighlighted.districtName;\n\n    const svg = d3.select(svgRef.current);\n    if (currentMap.option === MAP_OPTIONS.HOTSPOTS) {\n      svg\n        .select('.circles')\n        .selectAll('circle')\n        .attr('fill-opacity', (d) => {\n          const highlighted =\n            state === d.properties.st_nm &&\n            (!district ||\n              district === d.properties?.district ||\n              (district === UNKNOWN_DISTRICT_KEY && !d.properties.district));\n          return highlighted ? 1 : 0.5;\n        });\n    } else {\n      svg\n        .select('.regions')\n        .selectAll('path')\n        .each(function (d) {\n          const highlighted =\n            state === d.properties.st_nm &&\n            (currentMap.view === MAP_VIEWS.STATES ||\n              district === d.properties?.district);\n          if (highlighted) this.parentNode.appendChild(this);\n          d3.select(this).attr('stroke-opacity', highlighted ? 1 : 0);\n        });\n    }\n  }, [\n    geoDataResponse.data,\n    data,\n    currentMap.option,\n    currentMap.view,\n    regionHighlighted.stateCode,\n    regionHighlighted.districtName,\n    statistic,\n  ]);\n\n  return (\n    <React.Fragment>\n      <div className=\"svg-parent\">\n        <svg\n          id=\"chart\"\n          viewBox={`0 0 ${width} ${height}`}\n          preserveAspectRatio=\"xMidYMid meet\"\n          ref={svgRef}\n        >\n          <g className=\"regions\" />\n          <g className=\"state-borders\" />\n          {currentMap.view === MAP_VIEWS.DISTRICTS && (\n            <g className=\"district-borders\" />\n          )}\n          {currentMap.option === MAP_OPTIONS.HOTSPOTS && (\n            <g className=\"circles\" />\n          )}\n        </svg>\n        {mapMeta.mapType === MAP_TYPES.STATE &&\n          !!getTotalStatistic(\n            data[currentMap.code]?.districts?.[UNKNOWN_DISTRICT_KEY],\n            statistic\n          ) && (\n            <div className=\"disclaimer\">\n              <Icon.AlertCircle />\n              {t('District-wise {{statistic}} numbers need reconciliation', {\n                statistic: t(statistic),\n              })}\n            </div>\n          )}\n      </div>\n\n      {mapScale && (\n        <MapLegend\n          data={data}\n          mapScale={mapScale}\n          mapOption={currentMap.option}\n          statistic={statistic}\n        />\n      )}\n\n      <svg style={{position: 'absolute', height: 0}}>\n        <defs>\n          <filter id=\"balance-color\" colorInterpolationFilters=\"sRGB\">\n            <feColorMatrix\n              type=\"matrix\"\n              values=\"0.91372549  0           0            0  0.08627451\n                      0           0.91372549  0            0  0.08627451\n                      0           0           0.854901961  0  0.145098039\n                      0           0           0            1  0\"\n            />\n          </filter>\n        </defs>\n      </svg>\n    </React.Fragment>\n  );\n}\n\nexport default MapVisualizer;\n","import React from 'react';\nimport * as Icon from 'react-feather';\nimport ReactTooltip from 'react-tooltip';\n\nexport const testedToolTip = (\n  <span className=\"tooltip-tested\" onClick={(e) => e.stopPropagation()}>\n    <Icon.Info\n      data-for=\"tested\"\n      data-tip=\"Reporting total samples tested from ICMR data\"\n      data-event=\"touchstart mouseover\"\n      data-event-off=\"mouseleave\"\n    />\n    <ReactTooltip\n      id=\"tested\"\n      effect=\"solid\"\n      multiline={true}\n      scrollHide={true}\n      globalEventOff=\"click\"\n    />\n  </span>\n);\n","import MapVisualizerLoader from './loaders/mapvisualizer';\nimport MapVisualizer from './mapvisualizer';\nimport {testedToolTip} from './tooltips';\n\nimport {\n  MAP_META,\n  MAP_OPTIONS,\n  MAP_STATISTICS,\n  MAP_TYPES,\n  MAP_VIEWS,\n  STATE_NAMES,\n  STATE_POPULATIONS_MIL,\n  UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport {\n  capitalize,\n  formatNumber,\n  formatDate,\n  formatLastUpdated,\n  getStatistic,\n} from '../utils/commonfunctions';\n\nimport {PinIcon} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  Suspense,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {useSprings, animated} from 'react-spring';\n\nfunction MapExplorer({\n  stateCode,\n  data,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  mapStatistic,\n  setMapStatistic,\n  isCountryLoaded = true,\n}) {\n  const {t} = useTranslation();\n  const history = useHistory();\n\n  const [width, setWidth] = useState(480);\n  const mapExplorerRef = useRef();\n\n  useEffect(() => {\n    setWidth(mapExplorerRef.current.clientWidth);\n  }, []);\n\n  const [currentMap, setCurrentMap] = useState({\n    code: stateCode,\n    view:\n      MAP_META[stateCode].mapType === MAP_TYPES.COUNTRY\n        ? MAP_VIEWS.STATES\n        : MAP_VIEWS.DISTRICTS,\n    option: MAP_OPTIONS.TOTAL,\n  });\n  const currentMapMeta = MAP_META[currentMap.code];\n\n  const currentMapData =\n    currentMapMeta.mapType === MAP_TYPES.COUNTRY\n      ? data\n      : {[currentMap.code]: data[currentMap.code]};\n\n  useEffect(() => {\n    if (regionHighlighted.districtName) {\n      if (\n        currentMap.code !== regionHighlighted.stateCode &&\n        !(\n          currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\n          currentMap.view === MAP_VIEWS.DISTRICTS\n        )\n      ) {\n        const newMapMeta = MAP_META[regionHighlighted.stateCode];\n        if (!newMapMeta) {\n          return;\n        }\n        setCurrentMap({\n          code: regionHighlighted.stateCode,\n          view: MAP_VIEWS.DISTRICTS,\n          option:\n            currentMap.option === MAP_OPTIONS.PER_MILLION\n              ? MAP_OPTIONS.TOTAL\n              : currentMap.option,\n        });\n      }\n    } else if (isCountryLoaded && currentMapMeta.mapType === MAP_TYPES.STATE) {\n      setCurrentMap({\n        code: 'TT',\n        view:\n          currentMap.option === MAP_OPTIONS.ZONES\n            ? MAP_VIEWS.DISTRICTS\n            : MAP_VIEWS.STATES,\n        option: currentMap.option,\n      });\n    }\n  }, [\n    isCountryLoaded,\n    regionHighlighted.stateCode,\n    regionHighlighted.districtName,\n    currentMap.code,\n    currentMap.option,\n    currentMap.view,\n    currentMapMeta.mapType,\n  ]);\n\n  const switchMap = useCallback(\n    (stateCode) => {\n      const newMapMeta = MAP_META[stateCode];\n      if (!newMapMeta) {\n        return;\n      }\n      if (newMapMeta.mapType === MAP_TYPES.STATE) {\n        const districts = data[stateCode].districts;\n        const topDistrict = Object.keys(districts).sort(\n          (a, b) =>\n            getStatistic(districts[b], 'total', mapStatistic) -\n            getStatistic(districts[a], 'total', mapStatistic)\n        )[0];\n        ReactDOM.unstable_batchedUpdates(() => {\n          setRegionHighlighted({\n            stateCode: stateCode,\n            districtName: topDistrict,\n          });\n          setCurrentMap({\n            code: stateCode,\n            view: MAP_VIEWS.DISTRICTS,\n            option:\n              currentMap.option === MAP_OPTIONS.PER_MILLION\n                ? MAP_OPTIONS.TOTAL\n                : currentMap.option,\n          });\n        });\n      } else {\n        ReactDOM.unstable_batchedUpdates(() => {\n          setCurrentMap({\n            code: 'TT',\n            view:\n              currentMap.option === MAP_OPTIONS.ZONES\n                ? MAP_VIEWS.DISTRICTS\n                : MAP_VIEWS.STATES,\n            option: currentMap.option,\n          });\n          setRegionHighlighted({\n            stateCode: 'TT',\n            districtName: null,\n          });\n        });\n      }\n    },\n    [data, currentMap.option, mapStatistic, setRegionHighlighted]\n  );\n\n  const panelState = useMemo(() => {\n    const stateCode =\n      currentMap.view === MAP_VIEWS.STATES\n        ? regionHighlighted.stateCode\n        : currentMap.code;\n    const stateData = data[stateCode] || {};\n    return produce(stateData, (draft) => {\n      draft.state = STATE_NAMES[stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, currentMap.view, currentMap.code]);\n\n  const hoveredRegion = useMemo(() => {\n    const hoveredData =\n      (regionHighlighted.districtName\n        ? data[regionHighlighted.stateCode]?.districts?.[\n            regionHighlighted.districtName\n          ]\n        : data[regionHighlighted.stateCode]) || {};\n    return produce(hoveredData, (draft) => {\n      draft.name =\n        regionHighlighted.districtName ||\n        STATE_NAMES[regionHighlighted.stateCode];\n      if (!regionHighlighted.districtName)\n        draft.population_millions =\n          STATE_POPULATIONS_MIL[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n  const handleTabClick = (option) => {\n    switch (option) {\n      case MAP_OPTIONS.TOTAL:\n        setCurrentMap({\n          code: currentMap.code,\n          view:\n            currentMapMeta.mapType === MAP_TYPES.COUNTRY\n              ? MAP_VIEWS.STATES\n              : MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.TOTAL,\n        });\n        if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n          setRegionHighlighted({\n            stateCode: regionHighlighted.stateCode,\n            districtName: null,\n          });\n        return;\n      case MAP_OPTIONS.PER_MILLION:\n        if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.STATES,\n          option: MAP_OPTIONS.PER_MILLION,\n        });\n        setRegionHighlighted({\n          stateCode: regionHighlighted.stateCode,\n          districtName: null,\n        });\n        return;\n      case MAP_OPTIONS.HOTSPOTS:\n        if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.HOTSPOTS,\n        });\n        return;\n      case MAP_OPTIONS.ZONES:\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.ZONES,\n        });\n        if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n          setRegionHighlighted({\n            stateCode: 'TT',\n            districtName: null,\n          });\n        return;\n      default:\n        return;\n    }\n  };\n\n  const springs = useSprings(\n    MAP_STATISTICS.length,\n    MAP_STATISTICS.map((statistic) => ({\n      total: getStatistic(panelState, 'total', statistic),\n      delta: getStatistic(panelState, 'delta', statistic),\n      from: {\n        total: getStatistic(panelState, 'total', statistic),\n        delta: getStatistic(panelState, 'delta', statistic),\n      },\n      config: {\n        tension: 500,\n        clamp: true,\n      },\n    }))\n  );\n\n  return (\n    <div\n      className={classnames(\n        'MapExplorer',\n        {stickied: anchor === 'mapexplorer'},\n        {hidden: anchor && anchor !== 'mapexplorer'}\n      )}\n    >\n      {window.innerWidth > 769 && (\n        <div\n          className={classnames('anchor', {stickied: anchor === 'mapexplorer'})}\n          onClick={() => {\n            setAnchor(anchor === 'mapexplorer' ? null : 'mapexplorer');\n          }}\n        >\n          <PinIcon />\n        </div>\n      )}\n\n      <div className=\"header\">\n        <h1>\n          {currentMap.code === 'TT'\n            ? t('India')\n            : t(STATE_NAMES[currentMap.code])}{' '}\n          {t('Map')}\n        </h1>\n        <h6>\n          {t('{{action}} over a {{mapType}} for more details', {\n            action: t(window.innerWidth <= 769 ? 'Tap' : 'Hover'),\n            mapType: t(\n              currentMapMeta.mapType === MAP_TYPES.COUNTRY\n                ? 'state/UT'\n                : 'District'\n            ),\n          })}\n        </h6>\n      </div>\n\n      <div className=\"map-stats\">\n        {MAP_STATISTICS.map((statistic, index) => (\n          <div\n            key={statistic}\n            className={classnames('stats', statistic, {\n              focused: statistic === mapStatistic,\n            })}\n            onClick={() => setMapStatistic(statistic)}\n          >\n            <h5>{t(capitalize(statistic))}</h5>\n            <div className=\"stats-bottom\">\n              <animated.h1>\n                {springs[index].total.interpolate((total) =>\n                  formatNumber(Math.floor(total))\n                )}\n              </animated.h1>\n              {statistic !== 'tested' && (\n                <animated.h6>\n                  {springs[index].delta.interpolate((delta) =>\n                    delta > 0 ? `+${formatNumber(Math.floor(delta))}` : '\\u00A0'\n                  )}\n                </animated.h6>\n              )}\n              {statistic === 'tested' && (\n                <h6>\n                  {panelState?.total?.tested &&\n                    t('As of {{date}}', {\n                      date: formatDate(\n                        panelState.meta.tested['last_updated'],\n                        'dd MMM'\n                      ),\n                    })}\n                </h6>\n              )}\n            </div>\n            {statistic === 'tested' && panelState?.total?.tested && (\n              <a href={panelState.meta.tested.source} target=\"_noblank\">\n                <Icon.Link />\n              </a>\n            )}\n            {statistic === 'tested' &&\n              panelState.state === 'Total' &&\n              testedToolTip}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"meta\">\n        {currentMapMeta.mapType === MAP_TYPES.STATE && (\n          <div\n            className=\"map-button\"\n            onClick={() => history.push(`state/${currentMap.code}`)}\n          >\n            {t('Visit state page')}\n            <Icon.ArrowRightCircle />\n          </div>\n        )}\n\n        {currentMapMeta.mapType !== MAP_TYPES.STATE &&\n          panelState?.meta?.['last_updated'] && (\n            <div className=\"last-update\">\n              <h6>{t('Last updated')}</h6>\n              <h3>\n                {`${formatLastUpdated(panelState.meta['last_updated'])} ${t(\n                  'ago'\n                )}`}\n              </h3>\n            </div>\n          )}\n\n        <h2\n          className={classnames(mapStatistic, {\n            [hoveredRegion?.zone]: currentMap.option === MAP_OPTIONS.ZONES,\n          })}\n        >\n          {t(hoveredRegion.name)}\n          {hoveredRegion.name === UNKNOWN_DISTRICT_KEY &&\n            ` (${t(STATE_NAMES[regionHighlighted.stateCode])})`}\n        </h2>\n\n        {currentMapMeta.mapType === MAP_TYPES.STATE && (\n          <div className=\"map-button\" onClick={() => switchMap('TT')}>\n            {t('Back')}\n          </div>\n        )}\n\n        {currentMap.option !== MAP_OPTIONS.ZONES &&\n          ((currentMap.view === MAP_VIEWS.DISTRICTS &&\n            regionHighlighted.districtName) ||\n            (currentMap.view === MAP_VIEWS.STATES &&\n              currentMap.option !== MAP_OPTIONS.TOTAL)) && (\n            <h1 className={classnames('district', mapStatistic)}>\n              {formatNumber(\n                getStatistic(\n                  hoveredRegion,\n                  'total',\n                  mapStatistic,\n                  currentMap.option === MAP_OPTIONS.PER_MILLION\n                    ? hoveredRegion.population_millions\n                    : 1\n                )\n              )}\n              <br />\n              <span>\n                {t(mapStatistic)}\n                {currentMap.option === MAP_OPTIONS.PER_MILLION &&\n                  ` ${t('per million')}`}\n              </span>\n            </h1>\n          )}\n      </div>\n\n      <div ref={mapExplorerRef}>\n        {mapStatistic && (\n          <Suspense\n            fallback={\n              <MapVisualizerLoader {...{width, statistic: mapStatistic}} />\n            }\n          >\n            <MapVisualizer\n              currentMap={currentMap}\n              data={currentMapData}\n              changeMap={switchMap}\n              regionHighlighted={regionHighlighted}\n              setRegionHighlighted={setRegionHighlighted}\n              statistic={mapStatistic}\n              isCountryLoaded={isCountryLoaded}\n            />\n          </Suspense>\n        )}\n      </div>\n\n      <div className=\"tabs-map\">\n        {Object.values(MAP_OPTIONS).map((option) => (\n          <div\n            key={option}\n            className={classnames('tab', {\n              focused: currentMap.option === option,\n            })}\n            onClick={() => handleTabClick(option)}\n          >\n            <h4>\n              {t(option)}\n              {option === MAP_OPTIONS.PER_MILLION && <sup>&dagger;</sup>}\n            </h4>\n          </div>\n        ))}\n      </div>\n\n      <h6 className={classnames('footnote', 'table-fineprint')}>\n        &dagger; {`${t('Based on 2019 population projection by NCP')} (`}\n        <a\n          href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\n          target=\"_noblank\"\n          style={{color: '#6c757d'}}\n        >\n          {t('source')}\n        </a>\n        )\n      </h6>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  }\n  if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  }\n  if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  }\n  if (\n    !equal(\n      prevProps.data?.TT?.meta?.['last_updated'],\n      currProps.data?.TT?.meta?.['last_updated']\n    )\n  ) {\n    return false;\n  }\n  if (!equal(prevProps.data?.TT?.total, currProps.data?.TT?.total)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(MapExplorer, isEqual);\n","import {\n  COLORS,\n  D3_TRANSITION_DURATION,\n  TIMESERIES_STATISTICS,\n} from '../constants';\nimport {useResizeObserver} from '../hooks/useresizeobserver';\nimport {\n  capitalize,\n  formatNumber,\n  formatDate,\n  getStatistic,\n  parseIndiaDate,\n} from '../utils/commonfunctions';\n\nimport classnames from 'classnames';\nimport * as d3 from 'd3';\nimport {interpolatePath} from 'd3-interpolate-path';\nimport {formatISO, subDays} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {useTranslation} from 'react-i18next';\n\nfunction TimeSeries({timeseries, dates, chartType, isUniform, isLog}) {\n  const {t} = useTranslation();\n  const refs = useRef([]);\n\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  const [highlightedDate, setHighlightedDate] = useState();\n\n  useEffect(() => {\n    setHighlightedDate(dates[dates.length - 1]);\n  }, [dates]);\n\n  useEffect(() => {\n    const T = dates.length;\n\n    const {width, height} =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    // Margins\n    const margin = {top: 15, right: 35, bottom: 25, left: 25};\n    const chartRight = width - margin.right;\n    const chartBottom = height - margin.bottom;\n\n    const yBufferTop = 1.2;\n    const yBufferBottom = 1.1;\n\n    const xScale = d3\n      .scaleTime()\n      .clamp(true)\n      .domain([parseIndiaDate(dates[0]), parseIndiaDate(dates[T - 1])])\n      .range([margin.left, chartRight]);\n\n    // Number of x-axis ticks\n    const numTicksX = width < 480 ? 4 : 7;\n\n    const xAxis = (g) =>\n      g.attr('class', 'x-axis').call(\n        d3\n          .axisBottom(xScale)\n          .ticks(numTicksX)\n          .tickFormat((date) => formatDate(date, 'dd MMM'))\n      );\n\n    const xAxis2 = (g, yScale) => {\n      g.attr('class', 'x-axis2')\n        .call(d3.axisBottom(xScale).tickValues([]).tickSize(0))\n        .select('.domain')\n        .style('transform', `translateY(${yScale(0)}px)`);\n\n      if (yScale(0) !== chartBottom) g.select('.domain').attr('opacity', 0.4);\n      else g.select('.domain').attr('opacity', 0);\n    };\n\n    const yAxis = (g, yScale) =>\n      g\n        .attr('class', 'y-axis')\n        .call(d3.axisRight(yScale).ticks(4, '0~s').tickPadding(4));\n\n    const uniformScaleMin = d3.min(dates, (date) =>\n      getStatistic(timeseries[date], chartType, 'active')\n    );\n\n    const uniformScaleMax = d3.max(dates, (date) =>\n      Math.max(\n        getStatistic(timeseries[date], chartType, 'confirmed'),\n        getStatistic(timeseries[date], chartType, 'recovered'),\n        getStatistic(timeseries[date], chartType, 'deceased')\n      )\n    );\n\n    const yScaleUniformLinear = d3\n      .scaleLinear()\n      .clamp(true)\n      .domain([uniformScaleMin, Math.max(1, yBufferTop * uniformScaleMax)])\n      .nice(4)\n      .range([chartBottom, margin.top]);\n\n    const yScaleUniformLog = d3\n      .scaleLog()\n      .clamp(true)\n      .domain([\n        Math.max(1, uniformScaleMin),\n        Math.max(10, yBufferTop * uniformScaleMax),\n      ])\n      .nice(4)\n      .range([chartBottom, margin.top]);\n\n    const generateYScale = (statistic) => {\n      if (isUniform && isLog && statistic !== 'tested') return yScaleUniformLog;\n\n      if (isUniform && statistic !== 'tested') return yScaleUniformLinear;\n\n      if (isLog)\n        return d3\n          .scaleLog()\n          .clamp(true)\n          .domain([\n            Math.max(\n              1,\n              d3.min(dates, (date) =>\n                getStatistic(timeseries[date], chartType, statistic)\n              )\n            ),\n            Math.max(\n              10,\n              yBufferTop *\n                d3.max(dates, (date) =>\n                  getStatistic(timeseries[date], chartType, statistic)\n                )\n            ),\n          ])\n          .nice(4)\n          .range([chartBottom, margin.top]);\n\n      return d3\n        .scaleLinear()\n        .clamp(true)\n        .domain([\n          yBufferBottom *\n            Math.min(\n              0,\n              d3.min(dates, (date) =>\n                getStatistic(timeseries[date], chartType, statistic)\n              )\n            ),\n          Math.max(\n            1,\n            yBufferTop *\n              d3.max(dates, (date) =>\n                getStatistic(timeseries[date], chartType, statistic)\n              )\n          ),\n        ])\n        .nice(4)\n        .range([chartBottom, margin.top]);\n    };\n\n    function mousemove() {\n      const xm = d3.mouse(this)[0];\n      const date = xScale.invert(xm);\n      const bisectDate = d3.bisector((date) => parseIndiaDate(date)).left;\n      const index = bisectDate(dates, date, 1);\n      setHighlightedDate(dates[index]);\n    }\n\n    function mouseout() {\n      setHighlightedDate(dates[T - 1]);\n    }\n\n    /* Begin drawing charts */\n    refs.current.forEach((ref, i) => {\n      const svg = d3.select(ref);\n      const t = svg.transition().duration(D3_TRANSITION_DURATION);\n\n      const statistic = TIMESERIES_STATISTICS[i];\n      const yScale = generateYScale(statistic);\n      const color = COLORS[statistic];\n\n      /* X axis */\n      svg\n        .select('.x-axis')\n        .style('transform', `translateY(${chartBottom}px)`)\n        .transition(t)\n        .call(xAxis);\n      svg.select('.x-axis2').transition(t).call(xAxis2, yScale);\n\n      /* Y axis */\n      svg\n        .select('.y-axis')\n        .style('transform', `translateX(${chartRight}px)`)\n        .transition(t)\n        .call(yAxis, yScale);\n\n      /* Path dots */\n      svg\n        .selectAll('circle')\n        .data(dates, (date) => date)\n        .join((enter) =>\n          enter\n            .append('circle')\n            .attr('fill', color)\n            .attr('stroke', color)\n            .attr('r', 2)\n            .attr('cy', chartBottom)\n            .attr('cx', (date) => xScale(parseIndiaDate(date)))\n        )\n        .transition(t)\n        .attr('cx', (date) => xScale(parseIndiaDate(date)))\n        .attr('cy', (date) =>\n          yScale(getStatistic(timeseries[date], chartType, statistic))\n        );\n\n      if (chartType === 'total') {\n        svg\n          .selectAll('.stem')\n          .transition(t)\n          .attr('y1', yScale(0))\n          .attr('y2', yScale(0))\n          .remove();\n\n        const line = d3\n          .line()\n          .curve(d3.curveMonotoneX)\n          .x((date) => xScale(parseIndiaDate(date)))\n          .y((date) =>\n            yScale(getStatistic(timeseries[date], chartType, statistic))\n          );\n\n        let pathLength;\n        svg\n          .selectAll('.trend')\n          .data(T ? [dates] : [])\n          .join(\n            (enter) =>\n              enter\n                .append('path')\n                .attr('class', 'trend')\n                .attr('fill', 'none')\n                .attr('stroke', color + '50')\n                .attr('stroke-width', 4)\n                .attr('d', line)\n                .attr('stroke-dasharray', function () {\n                  return (pathLength = this.getTotalLength());\n                })\n                .call((enter) =>\n                  enter\n                    .attr('stroke-dashoffset', pathLength)\n                    .transition(t)\n                    .attr('stroke-dashoffset', 0)\n                ),\n            (update) =>\n              update\n                .attr('stroke-dasharray', null)\n                .transition(t)\n                .attrTween('d', function (date) {\n                  const previous = d3.select(this).attr('d');\n                  const current = line(date);\n                  return interpolatePath(previous, current);\n                })\n          );\n      } else {\n        /* DAILY TRENDS */\n        svg.selectAll('.trend').remove();\n\n        svg\n          .selectAll('.stem')\n          .data(dates, (date) => date)\n          .join((enter) =>\n            enter\n              .append('line')\n              .attr('class', 'stem')\n              .style('stroke', color + '99')\n              .style('stroke-width', 4)\n              .attr('x1', (date) => xScale(parseIndiaDate(date)))\n              .attr('y1', chartBottom)\n              .attr('x2', (date) => xScale(parseIndiaDate(date)))\n              .attr('y2', chartBottom)\n          )\n          .transition(t)\n          .attr('x1', (date) => xScale(parseIndiaDate(date)))\n          .attr('y1', yScale(0))\n          .attr('x2', (date) => xScale(parseIndiaDate(date)))\n          .attr('y2', (date) =>\n            yScale(getStatistic(timeseries[date], chartType, statistic))\n          );\n      }\n\n      svg.selectAll('*').attr('pointer-events', 'none');\n      svg\n        .on('mousemove', mousemove)\n        .on('touchmove', mousemove)\n        .on('mouseout', mouseout)\n        .on('touchend', mouseout);\n    });\n  }, [chartType, dimensions, isUniform, isLog, timeseries, dates]);\n\n  useEffect(() => {\n    refs.current.forEach((ref) => {\n      const svg = d3.select(ref);\n      svg\n        .selectAll('circle')\n        .attr('r', (date) => (date === highlightedDate ? 4 : 2));\n    });\n  }, [highlightedDate]);\n\n  const getStatisticDelta = useCallback(\n    (statistic) => {\n      if (!highlightedDate) return;\n      const deltaToday = getStatistic(\n        timeseries?.[highlightedDate],\n        'delta',\n        statistic\n      );\n      if (chartType === 'total') return deltaToday;\n      const yesterday = formatISO(subDays(parseIndiaDate(highlightedDate), 1), {\n        representation: 'date',\n      });\n      const deltaYesterday = getStatistic(\n        timeseries?.[yesterday],\n        'delta',\n        statistic\n      );\n      return deltaToday - deltaYesterday;\n    },\n    [timeseries, highlightedDate, chartType]\n  );\n\n  return (\n    <React.Fragment>\n      <div className=\"TimeSeries\">\n        {TIMESERIES_STATISTICS.map((statistic, index) => {\n          const delta = getStatisticDelta(statistic);\n          return (\n            <div\n              key={statistic}\n              className={classnames('svg-parent', `is-${statistic}`)}\n              ref={wrapperRef}\n            >\n              {highlightedDate && (\n                <div className={classnames('stats', `is-${statistic}`)}>\n                  <h5 className=\"title\">{capitalize(t(statistic))}</h5>\n                  <h5 className=\"title\">\n                    {formatDate(highlightedDate, 'dd MMMM')}\n                  </h5>\n                  <div className=\"stats-bottom\">\n                    <h2>\n                      {formatNumber(\n                        getStatistic(\n                          timeseries?.[highlightedDate],\n                          chartType,\n                          statistic\n                        )\n                      )}\n                    </h2>\n                    <h6>{`${delta > 0 ? '+' : ''}${formatNumber(delta)}`}</h6>\n                  </div>\n                </div>\n              )}\n              <svg\n                ref={(element) => {\n                  refs.current[index] = element;\n                }}\n                preserveAspectRatio=\"xMidYMid meet\"\n              >\n                <g className=\"x-axis\" />\n                <g className=\"x-axis2\" />\n                <g className=\"y-axis\" />\n              </svg>\n            </div>\n          );\n        })}\n      </div>\n    </React.Fragment>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(currProps.chartType, prevProps.chartType)) {\n    return false;\n  }\n  if (!equal(currProps.isUniform, prevProps.isUniform)) {\n    return false;\n  }\n  if (!equal(currProps.isLog, prevProps.isLog)) {\n    return false;\n  }\n  if (!equal(currProps.stateCode, prevProps.stateCode)) {\n    return false;\n  }\n  if (!equal(currProps.dates, prevProps.dates)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(TimeSeries, isEqual);\n","import TimeSeries from './timeseries';\n\nimport {\n  STATE_NAMES,\n  TIMESERIES_CHART_TYPES,\n  TIMESERIES_OPTIONS,\n} from '../constants';\nimport {getIndiaYesterdayISO, parseIndiaDate} from '../utils/commonfunctions';\n\nimport 'intersection-observer';\n\nimport {PinIcon, IssueOpenedIcon} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport {formatISO, sub} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport React, {useMemo, useRef, useState} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useIsVisible} from 'react-is-visible';\nimport {useLocalStorage} from 'react-use';\n\nfunction TimeSeriesExplorer({\n  timeseries,\n  date: timelineDate,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  stateCodes,\n}) {\n  const {t} = useTranslation();\n  const [timeseriesOption, setTimeseriesOption] = useState(\n    TIMESERIES_OPTIONS.MONTH\n  );\n  const [chartType, setChartType] = useLocalStorage('chartType', 'total');\n  const [isUniform, setIsUniform] = useLocalStorage('isUniform', true);\n  const [isLog, setIsLog] = useLocalStorage('isLog', false);\n  const explorerElement = useRef();\n  const isVisible = useIsVisible(explorerElement, {once: true});\n\n  const dates = useMemo(() => {\n    const today = timelineDate || getIndiaYesterdayISO();\n    const pastDates = Object.keys(timeseries || {}).filter(\n      (date) => date <= today\n    );\n\n    if (timeseriesOption === TIMESERIES_OPTIONS.TWO_WEEKS) {\n      const cutOffDate = formatISO(sub(parseIndiaDate(today), {weeks: 2}), {\n        representation: 'date',\n      });\n      return pastDates.filter((date) => date >= cutOffDate);\n    } else if (timeseriesOption === TIMESERIES_OPTIONS.MONTH) {\n      const cutOffDate = formatISO(sub(parseIndiaDate(today), {months: 1}), {\n        representation: 'date',\n      });\n      return pastDates.filter((date) => date >= cutOffDate);\n    }\n    return pastDates;\n  }, [timeseries, timelineDate, timeseriesOption]);\n\n  const handleChange = ({target}) => {\n    setRegionHighlighted({\n      stateCode: target.value,\n      districtName: null,\n    });\n  };\n\n  return (\n    <div\n      className={classnames('TimeSeriesExplorer', {\n        stickied: anchor === 'timeseries',\n      })}\n      style={{display: anchor === 'mapexplorer' ? 'none' : ''}}\n      ref={explorerElement}\n    >\n      <div className=\"timeseries-header\">\n        <div\n          className={classnames('anchor', {\n            stickied: anchor === 'timeseries',\n          })}\n          onClick={() => {\n            setAnchor(anchor === 'timeseries' ? null : 'timeseries');\n          }}\n        >\n          <PinIcon />\n        </div>\n\n        <h1>{t('Spread Trends')}</h1>\n        <div className=\"tabs\">\n          {Object.entries(TIMESERIES_CHART_TYPES).map(([ctype, value]) => (\n            <div\n              className={`tab ${chartType === ctype ? 'focused' : ''}`}\n              key={ctype}\n              onClick={() => {\n                setChartType(ctype);\n              }}\n            >\n              <h4>{t(value)}</h4>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"scale-modes\">\n          <label className=\"main\">{t('Scale Modes')}</label>\n          <div className=\"timeseries-mode\">\n            <label htmlFor=\"timeseries-mode\">{t('Uniform')}</label>\n            <input\n              id=\"timeseries-mode\"\n              type=\"checkbox\"\n              className=\"switch\"\n              checked={isUniform}\n              aria-label={t('Checked by default to scale uniformly.')}\n              onChange={() => {\n                setIsUniform(!isUniform);\n              }}\n            />\n          </div>\n          <div\n            className={`timeseries-logmode ${\n              chartType !== 'total' ? 'disabled' : ''\n            }`}\n          >\n            <label htmlFor=\"timeseries-logmode\">{t('Logarithmic')}</label>\n            <input\n              id=\"timeseries-logmode\"\n              type=\"checkbox\"\n              checked={chartType === 'total' && isLog}\n              className=\"switch\"\n              disabled={chartType !== 'total'}\n              onChange={() => {\n                setIsLog(!isLog);\n              }}\n            />\n          </div>\n        </div>\n\n        {stateCodes && (\n          <div className=\"trends-state-name\">\n            <select value={regionHighlighted.stateCode} onChange={handleChange}>\n              {stateCodes.map((stateCode) => {\n                return (\n                  <option value={stateCode} key={stateCode}>\n                    {stateCode === 'TT'\n                      ? t('All States')\n                      : t(STATE_NAMES[stateCode])}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        )}\n      </div>\n\n      {isVisible && (\n        <TimeSeries\n          stateCode={regionHighlighted.stateCode}\n          {...{timeseries, dates, chartType, isUniform, isLog}}\n        />\n      )}\n\n      <div className=\"pills\">\n        {Object.values(TIMESERIES_OPTIONS).map((option) => (\n          <button\n            key={option}\n            type=\"button\"\n            className={classnames({selected: timeseriesOption === option})}\n            onClick={() => setTimeseriesOption(option)}\n          >\n            {t(option)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"alert\">\n        <IssueOpenedIcon size={24} />\n        <div className=\"alert-right\">\n          {t('Tested chart is independent of uniform scaling')}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (\n    !equal(\n      currProps.regionHighlighted.stateCode,\n      prevProps.regionHighlighted.stateCode\n    )\n  ) {\n    return false;\n  }\n  if (!equal(currProps.date, prevProps.date)) {\n    return false;\n  }\n  if (!equal(currProps.anchor, prevProps.anchor)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(TimeSeriesExplorer, isEqual);\n","import {format} from 'date-fns';\nimport clamp from 'lodash/clamp';\nimport React, {useState} from 'react';\nimport {useSprings, useTransition, animated, config} from 'react-spring';\nimport {useMeasure, useKeyPressEvent} from 'react-use';\nimport {useDrag} from 'react-use-gesture';\n\nconst Timeline = ({setIsTimelineMode, setDate, dates}) => {\n  const [timelineElement, {width}] = useMeasure();\n  const [index, setIndex] = useState(0);\n\n  const [springs, set] = useSprings(\n    dates.length,\n    (i) => ({\n      x: (index - i) * (480 / 3) + 480 / 2 - 35,\n      color: i === 0 ? '#6c757d' : '#6c757d99',\n      opacity: i < 2 ? 1 : 0,\n    }),\n    config.stiff\n  );\n\n  const bind = useDrag(\n    ({down, delta: [xDelta], direction: [xDir], distance, cancel}) => {\n      const clampedIndex = getClampedIndex(xDir);\n      if (down && distance > 25) {\n        cancel(setIndex(clampedIndex));\n        setClampedDate(clampedIndex);\n      }\n\n      if (index === 0 && xDir < 0) {\n        hideTimeline();\n      }\n\n      setSprings({clampedIndex: index, xDir, down, xDelta});\n    }\n  );\n\n  const getClampedIndex = (direction) => {\n    return clamp(index + (direction > 0 ? 1 : -1), 0, dates.length - 1);\n  };\n\n  const setSprings = ({direction, clampedIndex, down, xDelta}) => {\n    set((i) => {\n      if (i < clampedIndex - 1) {\n        return {x: width, color: '#6c757d99', opacity: 0, display: 'none'};\n      } else if (i > clampedIndex + 1) {\n        return {x: -40, color: '#6c757d99', opacity: 0, display: 'none'};\n      }\n\n      let x = 0;\n      if (xDelta) {\n        x =\n          (clampedIndex - i) * (width / 3) +\n          width / 2 -\n          35 +\n          (down ? xDelta : 0);\n      } else {\n        x = (clampedIndex - i) * (width / 3) + width / 3 + 45;\n      }\n\n      if (i === clampedIndex) {\n        return {x, color: '#6c757d', display: 'block'};\n      }\n      return {x, color: '#6c757d99', opacity: 1, display: 'block'};\n    });\n  };\n\n  const handleKeyPress = (direction) => {\n    if (index < dates.length) {\n      const clampedIndex = getClampedIndex(direction);\n      setSprings({direction, clampedIndex});\n      setIndex(clampedIndex);\n      setClampedDate(clampedIndex);\n    }\n    if (index === 1 && direction === -1) {\n      hideTimeline();\n    }\n  };\n\n  useKeyPressEvent('ArrowLeft', () => {\n    handleKeyPress(1);\n  });\n\n  useKeyPressEvent('ArrowRight', () => {\n    handleKeyPress(-1);\n  });\n\n  useKeyPressEvent('Escape', () => {\n    setIsTimelineMode(false);\n    setDate('');\n  });\n\n  const hideTimeline = () => {\n    setTimeout(() => {\n      setIsTimelineMode(false);\n    }, 1000);\n  };\n\n  const getDate = (index) => {\n    if (index === 0) return 'Today';\n    return format(new Date(dates[index]), 'dd MMM');\n  };\n\n  const setClampedDate = (clampedIndex) => {\n    if (clampedIndex === 0) {\n      setDate('');\n    } else {\n      setDate(dates[clampedIndex]);\n    }\n  };\n\n  const timeline = {\n    '2020-03-25': 'Beginning of Lockdown Phase 1',\n    '2020-04-14': 'End of Lockdown Phase 1',\n    '2020-04-15': 'Beginning of Lockdown Phase 2',\n    '2020-05-03': 'End of Lockdown Phase 2',\n    '2020-04-04': 'Beginning of Lockdown Phase 3',\n    '2020-04-17': 'End of Lockdown Phase 3',\n    '2020-05-18': 'Beginning of Lockdown Phase 4',\n    '2020-05-31': 'End of Lockdown Phase 4',\n    '2020-06-01': 'Beginning of Lockdown Phase 5',\n  };\n\n  const transition = useTransition(\n    timeline.hasOwnProperty(dates[index]),\n    null,\n    {\n      from: {transform: 'translate3d(0, 20px, 0)', opacity: 0},\n      enter: {transform: 'translate3d(0, 0px, 0)', opacity: 1},\n      leave: {transform: 'translate3d(0, 20px, 0)', opacity: 0},\n    }\n  );\n\n  const handleClick = (clampedIndex) => {\n    if (clampedIndex > index) {\n      handleKeyPress(+1);\n    } else {\n      handleKeyPress(-1);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {transition.map(\n        ({item, key, props}) =>\n          item && (\n            <animated.h5 className=\"highlight\" key={key} style={props}>\n              {timeline[dates[index]]}\n            </animated.h5>\n          )\n      )}\n\n      <div className=\"Timeline\" ref={timelineElement} {...bind()}>\n        {springs\n          .filter(\n            ({opacity}, i) =>\n              i < dates.length &&\n              (i === index + 1 ||\n                i === index - 1 ||\n                i === index + 2 ||\n                i === index - 2 ||\n                i === index)\n          )\n          .map(({x, color, opacity, display}, i) => (\n            <animated.div\n              className=\"day\"\n              key={i}\n              style={{\n                transform: x.interpolate((x) => `translate3d(${x}px,0,0)`),\n                opacity,\n                display,\n              }}\n            >\n              {index < 2 && (\n                <animated.h5\n                  style={{color}}\n                  onClick={() => {\n                    handleClick(i);\n                  }}\n                >\n                  {getDate(i)}\n                </animated.h5>\n              )}\n              {index > 1 && index < dates.length && (\n                <animated.h5\n                  style={{color}}\n                  onClick={() => {\n                    handleClick(index + i - 2);\n                  }}\n                >\n                  {getDate(index + i - 2)}\n                </animated.h5>\n              )}\n            </animated.div>\n          ))}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default React.memo(Timeline);\n","import {formatDistance, format} from 'date-fns';\nimport React, {useLayoutEffect} from 'react';\n\nconst newDate = new Date();\nlet currentDate = newDate;\n\nfunction Updates({updates}) {\n  useLayoutEffect(() => {\n    currentDate = newDate;\n  });\n\n  return (\n    <div className=\"updates\">\n      <div className=\"updates-header\">\n        <h2>{format(currentDate, 'd MMM')}</h2>\n      </div>\n\n      {updates\n        .slice(-5)\n        .reverse()\n        .map(function (activity, index) {\n          activity.update = activity.update.replace(/\\n/g, '<br/>');\n          const activityDate = new Date(activity.timestamp * 1000);\n          const addHeader = () => {\n            currentDate = activityDate;\n\n            return (\n              <React.Fragment>\n                {index === 0 ? (\n                  <div className=\"update\">\n                    <h4>No updates yet!</h4>\n                  </div>\n                ) : (\n                  ''\n                )}\n                <div className=\"updates-header\">\n                  <h2>{format(activityDate, 'd MMM')}</h2>\n                </div>\n              </React.Fragment>\n            );\n          };\n\n          return (\n            <React.Fragment key={index}>\n              {activityDate.getDate() !== currentDate.getDate()\n                ? addHeader()\n                : ' '}\n              <div key={index} className=\"update\">\n                <h5>\n                  {formatDistance(\n                    new Date(activity.timestamp * 1000),\n                    new Date()\n                  ) + ' ago'}\n                </h5>\n                <h4\n                  dangerouslySetInnerHTML={{\n                    __html: activity.update,\n                  }}\n                ></h4>\n              </div>\n            </React.Fragment>\n          );\n        })}\n    </div>\n  );\n}\n\nexport default Updates;\n","import Timeline from './timeline';\nimport Updates from './updates';\n\nimport {fetcher} from '../utils/commonfunctions';\n\nimport {parse, format} from 'date-fns';\nimport {utcToZonedTime} from 'date-fns-tz';\nimport React, {useMemo, useState, useEffect} from 'react';\nimport * as Icon from 'react-feather';\nimport {useSpring, animated, useTrail, config} from 'react-spring';\nimport {useLocalStorage} from 'react-use';\nimport useSWR from 'swr';\n\nconst Actions = ({setDate, dates}) => {\n  const [showUpdates, setShowUpdates] = useState(false);\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage('lastViewedLog', 0);\n  const [isTimelineMode, setIsTimelineMode] = useState(false);\n\n  const {data: updates} = useSWR(\n    'https://api.covid19india.org/updatelog/log.json',\n    fetcher,\n    {\n      revalidateOnFocus: false,\n    }\n  );\n\n  useEffect(() => {\n    if (updates !== undefined) {\n      const lastTimestamp = updates.slice().reverse()[0].timestamp * 1000;\n      if (lastTimestamp !== lastViewedLog) {\n        setNewUpdate(true);\n        setLastViewedLog(lastTimestamp);\n      }\n    }\n  }, [lastViewedLog, updates, setLastViewedLog, setNewUpdate]);\n\n  return (\n    <React.Fragment>\n      {!updates && <div style={{minHeight: '5rem'}} />}\n\n      {updates && (\n        <ActionsPanel\n          {...{\n            lastViewedLog,\n            newUpdate,\n            isTimelineMode,\n            setIsTimelineMode,\n            showUpdates,\n            setDate,\n            dates,\n            setNewUpdate,\n            setShowUpdates,\n          }}\n        />\n      )}\n\n      {showUpdates && <Updates {...{updates}} />}\n    </React.Fragment>\n  );\n};\n\nconst isEqual = (prevProps, currProps) => {\n  return true;\n};\n\nexport default React.memo(Actions, isEqual);\n\nconst ActionsPanel = ({\n  lastViewedLog,\n  newUpdate,\n  isTimelineMode,\n  setIsTimelineMode,\n  showUpdates,\n  setDate,\n  dates,\n  setNewUpdate,\n  setShowUpdates,\n}) => {\n  const Bell = useMemo(\n    () => (\n      <Icon.Bell\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n          setNewUpdate(false);\n        }}\n      />\n    ),\n    [setNewUpdate, setShowUpdates, showUpdates]\n  );\n\n  const BellOff = useMemo(\n    () => (\n      <Icon.BellOff\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n        }}\n      />\n    ),\n    [setShowUpdates, showUpdates]\n  );\n\n  const TimelineIcon = useMemo(\n    () => (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"-.2 -.2 17 17\"\n        width=\"16\"\n        height=\"16\"\n      >\n        <path\n          fillRule=\"evenodd\"\n          d=\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 \n          .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 \n          4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 \n          8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 \n          01.75.75v2.992l2.028.812a.75.75 0 01-.557 \n          1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 \n          0 017.75 4z\"\n        ></path>\n      </svg>\n    ),\n    []\n  );\n\n  const {transform, opacity} = useSpring({\n    opacity: isTimelineMode ? 1 : 0,\n    transform: `perspective(600px) rotateX(${isTimelineMode ? 180 : 0}deg)`,\n    config: {mass: 5, tension: 500, friction: 80},\n  });\n\n  const trail = useTrail(3, {\n    from: {transform: 'translate3d(0, 10px, 0)', opacity: 0},\n    to: {\n      transform: 'translate3d(0, 0px, 0)',\n      opacity: 1,\n    },\n    config: config.stiff,\n  });\n\n  const getTimeFromMilliseconds = (lastViewedLog) => {\n    return format(\n      utcToZonedTime(parse(lastViewedLog, 'T', new Date()), 'Asia/Kolkata'),\n      'dd MMM, p'\n    );\n  };\n\n  return (\n    <React.Fragment>\n      <animated.div\n        className=\"actions\"\n        style={{\n          opacity: opacity.interpolate((o) => 1 - o),\n          transform,\n          pointerEvents: isTimelineMode ? 'none' : '',\n        }}\n      >\n        <animated.h5 style={trail[0]}>{`${getTimeFromMilliseconds(\n          lastViewedLog\n        )} IST`}</animated.h5>\n\n        {!showUpdates && (\n          <animated.div className=\"bell-icon\" style={trail[1]}>\n            {Bell}\n            {newUpdate && <div className=\"indicator\"></div>}\n          </animated.div>\n        )}\n\n        {showUpdates && BellOff}\n        <animated.div\n          className=\"timeline-icon\"\n          onClick={() => {\n            setIsTimelineMode(true);\n          }}\n          style={trail[2]}\n        >\n          {TimelineIcon}\n        </animated.div>\n      </animated.div>\n\n      <animated.div\n        className=\"actions timeline\"\n        style={{\n          opacity,\n          transform: transform.interpolate((t) => `${t} rotateX(180deg)`),\n          pointerEvents: !isTimelineMode ? 'none' : '',\n        }}\n      >\n        {isTimelineMode && (\n          <Timeline {...{setIsTimelineMode, setDate, dates}} />\n        )}\n      </animated.div>\n    </React.Fragment>\n  );\n};\n","import {\n  STATE_CODES_ARRAY,\n  STATE_CODES,\n  STATE_NAMES,\n  ESSENTIALS_CATEGORIES,\n} from '../constants';\nimport {capitalize} from '../utils/commonfunctions';\n\nimport Bloodhound from 'corejs-typeahead';\nimport produce from 'immer';\nimport React, {useState, useCallback, useRef} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {Link} from 'react-router-dom';\nimport {useTrail, animated, config} from 'react-spring';\nimport {useDebounce} from 'react-use';\n\nconst engine = new Bloodhound({\n  initialize: true,\n  local: STATE_CODES_ARRAY,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),\n});\n\nconst districtEngine = new Bloodhound({\n  initialize: true,\n  limit: 5,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('district'),\n  indexRemote: true,\n  remote: {\n    url: 'https://api.covid19india.org/state_district_wise.json',\n    transform: function (response) {\n      const districts = [];\n      Object.keys(response).map((stateName) => {\n        const districtData = response[stateName].districtData;\n        Object.keys(districtData).map((districtName) => {\n          return districts.push({district: districtName, state: stateName});\n        });\n        return null;\n      });\n      return districts;\n    },\n  },\n});\n\nconst essentialsEngine = new Bloodhound({\n  initialize: true,\n  limit: 5,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace(\n    'category',\n    'city',\n    'contact',\n    'descriptionandorserviceprovided',\n    'nameoftheorganisation',\n    'state'\n  ),\n  indexRemote: true,\n  remote: {\n    url: 'https://api.covid19india.org/resources/resources.json',\n    transform: function (response) {\n      return response.resources;\n    },\n  },\n});\n\n/* let focused = false;\nconst suggestions = [\n  'Karnataka',\n  'West Bengal',\n  'Alappuzha',\n  'Senior citizen support bangalore',\n  'Community Kitchen in Kerala',\n  'Groceries Chennai',\n];*/\n\nconst essentialSuggestions = [\n  'Testing Pune',\n  'Delhi Shelter',\n  'Community Kitchen in Kerala',\n  'Groceries Chennai',\n  'Senior citizen support bangalore',\n];\nconst locationSuggestions = [\n  'Mumbai',\n  'Karnataka',\n  'Chennai',\n  'Alappuzha',\n  'Ganjam',\n];\n\nfunction Search() {\n  const [searchValue, setSearchValue] = useState('');\n  const [expand, setExpand] = useState(false);\n  const [results, setResults] = useState([]);\n  const searchInput = useRef(null);\n  const {t} = useTranslation();\n\n  const handleSearch = useCallback((searchInput) => {\n    const results = [];\n\n    const sync = (datums) => {\n      datums.map((result, index) => {\n        const stateObj = {\n          name: result.name,\n          type: 'state',\n          route: result.code,\n        };\n        results.push(stateObj);\n        return null;\n      });\n    };\n\n    const districtSync = (datums) => {\n      datums.slice(0, 3).map((result, index) => {\n        const districtObj = {\n          name: result.district,\n          type: 'district',\n          route: STATE_CODES[result.state],\n        };\n        results.push(districtObj);\n        return null;\n      });\n    };\n\n    const essentialsSync = (datums) => {\n      datums.slice(0, 5).map((result, index) => {\n        const essentialsObj = {\n          name: result.nameoftheorganisation,\n          type: 'essentials',\n          category: result.category,\n          website: result.contact,\n          description: result.descriptionandorserviceprovided,\n          city: result.city,\n          state: result.state,\n          contact: result.phonenumber,\n        };\n        results.push(essentialsObj);\n        return null;\n      });\n      setResults([...results]);\n    };\n\n    const essentialsAsync = (datums) => {\n      // to handle async remote call on initial launch\n      essentialsEngine.search(searchInput, essentialsSync);\n    };\n\n    engine.search(searchInput, sync);\n    districtEngine.search(searchInput, districtSync);\n    essentialsEngine.search(searchInput, essentialsSync, essentialsAsync);\n  }, []);\n\n  useDebounce(\n    () => {\n      if (searchValue) {\n        handleSearch(searchValue);\n      } else {\n        setResults(\n          produce(results, (draftResults) => {\n            draftResults.splice(0);\n          })\n        );\n      }\n    },\n    100,\n    [searchValue]\n  );\n\n  function setNativeValue(element, value) {\n    const valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;\n    const prototype = Object.getPrototypeOf(element);\n    const prototypeValueSetter = Object.getOwnPropertyDescriptor(\n      prototype,\n      'value'\n    ).set;\n\n    if (valueSetter && valueSetter !== prototypeValueSetter) {\n      prototypeValueSetter.call(element, value);\n    } else {\n      valueSetter.call(element, value);\n    }\n  }\n\n  /* function fillPlaceholder(target, index, cursorPosition, callback) {\n    if (focused) {\n      target.textContent = '';\n      return true;\n    }\n    const text = t(suggestions[index]);\n    const placeholder = target.textContent;\n    target.classList.remove('disappear');\n    target.textContent = placeholder + text[cursorPosition];\n    if (cursorPosition < text.length - 1) {\n      setTimeout(function () {\n        fillPlaceholder(target, index, cursorPosition + 1, callback);\n      }, 200);\n      return true;\n    }\n    callback();\n  }\n\n  function clearPlaceholder(target, callback) {\n    const placeholder = target.textContent;\n    target.classList.add('disappear');\n    if (placeholder.length > 0) {\n      setTimeout(function () {\n        target.textContent = '';\n        clearPlaceholder(target, callback);\n      }, 1000);\n      return true;\n    }\n    callback();\n  }\n\n  function loopThroughSuggestions(target, index) {\n    if (focused) {\n      target.textContent = '';\n      return true;\n    }\n    fillPlaceholder(target, index, 0, function () {\n      setTimeout(function () {\n        clearPlaceholder(target, function () {\n          loopThroughSuggestions(target, (index + 1) % suggestions.length);\n        });\n      }, 2000);\n    });\n  }\n\n  const targetInput = document.getElementById('search-placeholder');\n  if (targetInput) loopThroughSuggestions(targetInput, 0);*/\n\n  const [trail, set] = useTrail(3, () => ({\n    transform: 'translate3d(0, 10px, 0)',\n    opacity: 0,\n    config: config.stiff,\n  }));\n\n  set({transform: 'translate3d(0, 0px, 0)', opacity: 1});\n\n  return (\n    <div className=\"Search\">\n      <animated.label style={trail[0]}>\n        {t('Search your city, resources, etc')}\n      </animated.label>\n      <animated.div className=\"line\" style={trail[1]}></animated.div>\n\n      <animated.div className=\"search-input-wrapper\" style={trail[2]}>\n        <input\n          type=\"text\"\n          value={searchValue}\n          ref={searchInput}\n          onFocus={(event) => {\n            setExpand(true);\n          }}\n          onBlur={() => {\n            setExpand(false);\n          }}\n          onChange={(event) => {\n            setSearchValue(event.target.value);\n          }}\n        />\n        <span id=\"search-placeholder\" className=\"search-placeholder\"></span>\n\n        <div className={`search-button`}>\n          <Icon.Search />\n        </div>\n\n        {searchValue.length > 0 && (\n          <div\n            className={`close-button`}\n            onClick={() => {\n              setSearchValue('');\n              setResults([]);\n            }}\n          >\n            <Icon.X />\n          </div>\n        )}\n      </animated.div>\n\n      {results.length > 0 && (\n        <div className=\"results\">\n          {results.map((result, index) => {\n            if (result.type === 'state' || result.type === 'district') {\n              return (\n                <Link key={index} to={`state/${result.route}`}>\n                  <div className=\"result\">\n                    <div className=\"result-left\">\n                      <div className=\"result-name\">\n                        {`${result.name}`}\n                        {result.type === 'district' &&\n                          `, ${STATE_NAMES[result.route]}`}\n                      </div>\n                    </div>\n                    <div className=\"result-type\">\n                      <span>{[result.route]}</span>\n                      <Icon.ArrowRightCircle size={14} />\n                    </div>\n                  </div>\n                </Link>\n              );\n            } else {\n              return (\n                <a\n                  key={index}\n                  href={result.website || null}\n                  target=\"_noblank\"\n                  className=\"essential-result\"\n                >\n                  <div className=\"result-top\">\n                    <div className=\"result-top-left\">\n                      <div className=\"result-name\">{result.name}</div>\n                      <div className=\"result-location\">\n                        {result.city && `${result.city}, `}\n                        {result.state}\n                      </div>\n                    </div>\n                    <div className=\"result-category\">\n                      <div>\n                        {capitalize(ESSENTIALS_CATEGORIES[result.category])}\n                      </div>\n                      {result.website && <Icon.ExternalLink />}\n                    </div>\n                  </div>\n                  <div className=\"result-description\">{result.description}</div>\n                  <div className=\"result-contacts\">\n                    {result.contact.split('\\n').map((contact) => (\n                      <div key={contact} className=\"result-contact\">\n                        <Icon.Phone />\n                        <a href={`tel:${contact}`}>{contact}</a>\n                      </div>\n                    ))}\n                  </div>\n                </a>\n              );\n            }\n          })}\n        </div>\n      )}\n\n      {expand && (\n        <React.Fragment>\n          <p\n            className=\"feature\"\n            onMouseDown={(event) => {\n              event.preventDefault();\n              setNativeValue(searchInput.current, 'Cyclone Amphan');\n              searchInput.current.dispatchEvent(\n                new Event('input', {bubbles: true})\n              );\n            }}\n          >\n            To those who are in states affected by Cyclone Amphan or have\n            family/friends there, click here to view helplines for assistance.\n          </p>\n          <div className=\"expanded\">\n            <div className=\"expanded-left\">\n              <h3>{t('Essentials')}</h3>\n              <div className=\"suggestions\">\n                {essentialSuggestions.map((suggestion, index) => (\n                  <div className=\"suggestion\" key={index}>\n                    <div>-</div>\n                    <h4\n                      onMouseDown={(event) => {\n                        event.preventDefault();\n                        setNativeValue(searchInput.current, suggestion);\n                        searchInput.current.dispatchEvent(\n                          new Event('input', {bubbles: true})\n                        );\n                      }}\n                    >\n                      {t(suggestion)}\n                    </h4>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"expanded-right\">\n              <h3>{t('Locations')}</h3>\n              <div className=\"suggestions\">\n                {locationSuggestions.map((suggestion, index) => (\n                  <div className=\"suggestion\" key={index}>\n                    <div>-</div>\n                    <h4\n                      onMouseDown={(event) => {\n                        event.preventDefault();\n                        setNativeValue(searchInput.current, suggestion);\n                        searchInput.current.dispatchEvent(\n                          new Event('input', {bubbles: true})\n                        );\n                      }}\n                    >\n                      {t(suggestion)}\n                    </h4>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n}\n\nconst isEqual = () => {\n  return true;\n};\n\nexport default React.memo(Search, isEqual);\n","import {PRIMARY_STATISTICS, STATE_NAMES} from '../constants';\nimport {\n  abbreviate,\n  capitalize,\n  formatLastUpdated,\n  formatNumber,\n  getStatistic,\n} from '../utils/commonfunctions';\n\nimport Tooltip from '@primer/components/lib/Tooltip';\nimport {\n  InfoIcon,\n  TriangleUpIcon,\n  TriangleDownIcon,\n} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {useState, useCallback, useMemo} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {useSpring, animated, config} from 'react-spring';\nimport {createBreakpoint, useLocalStorage} from 'react-use';\n\nconst useBreakpoint = createBreakpoint({L: 768, S: 350});\n\nfunction PureCell({statistic, data}) {\n  const total = getStatistic(data, 'total', statistic);\n  const delta = getStatistic(data, 'delta', statistic);\n\n  const spring = useSpring(\n    {\n      total: total,\n      delta: delta,\n      from: {\n        total: total,\n        delta: delta,\n      },\n    },\n    config.gentle\n  );\n\n  return (\n    <td>\n      <animated.span className={classnames('delta', `is-${statistic}`)}>\n        {spring.delta.interpolate((delta) =>\n          delta > 0 ? '\\u2191' + formatNumber(Math.floor(delta)) : ''\n        )}\n      </animated.span>\n      <animated.span className=\"total\">\n        {spring.total.interpolate((total) => formatNumber(Math.floor(total)))}\n      </animated.span>\n    </td>\n  );\n}\n\nconst isCellEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.data.total, currProps.data.total)) {\n    return false;\n  }\n  if (!equal(prevProps.data.delta, currProps.data.delta)) {\n    return false;\n  }\n  return true;\n};\n\nconst Cell = React.memo(PureCell, isCellEqual);\n\nfunction DistrictHeaderCell({handleSortClick, statistic, sortData}) {\n  const breakpoint = useBreakpoint();\n  const {t} = useTranslation();\n\n  return (\n    <td onClick={() => handleSortClick(statistic)}>\n      <div className=\"heading-content\">\n        <abbr\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\n          title={capitalize(statistic)}\n        >\n          {breakpoint === 'S'\n            ? capitalize(statistic.slice(0, 1))\n            : breakpoint === 'L'\n            ? capitalize(abbreviate(statistic))\n            : capitalize(t(statistic))}\n        </abbr>\n        {sortData.sortColumn === statistic && (\n          <div>\n            {sortData.isAscending && <TriangleUpIcon />}\n            {!sortData.isAscending && <TriangleDownIcon />}\n            <div />\n          </div>\n        )}\n      </div>\n    </td>\n  );\n}\n\nfunction PureDistrictRow({\n  stateCode,\n  districtName,\n  data,\n  regionHighlighted,\n  setRegionHighlighted,\n}) {\n  const {t} = useTranslation();\n\n  const highlightDistrict = useCallback(() => {\n    if (regionHighlighted.districtName !== districtName) {\n      setRegionHighlighted(\n        produce(regionHighlighted, (draftRegionHighlighted) => {\n          draftRegionHighlighted.stateCode = stateCode;\n          draftRegionHighlighted.districtName = districtName;\n        })\n      );\n    }\n  }, [regionHighlighted, districtName, setRegionHighlighted, stateCode]);\n\n  return (\n    <tr\n      className={classnames('district', {\n        'is-highlighted': regionHighlighted?.districtName === districtName,\n      })}\n      onMouseEnter={highlightDistrict}\n    >\n      <td>\n        <div className=\"title-chevron\">\n          <span className=\"title-icon\">\n            {t(districtName)}\n            {data?.meta?.notes && (\n              <Tooltip\n                className=\"tooltip\"\n                aria-label={data.meta.notes}\n                wrap={true}\n                direction={'e'}\n                noDelay={true}\n              >\n                <Icon.Info />\n              </Tooltip>\n            )}\n          </span>\n        </div>\n      </td>\n\n      {PRIMARY_STATISTICS.map((statistic) => (\n        <Cell key={statistic} {...{statistic}} data={data} />\n      ))}\n    </tr>\n  );\n}\n\nconst isDistrictRowEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.data?.total, currProps.data?.total)) {\n    return false;\n  } else if (!equal(prevProps.data?.delta, currProps.data?.delta)) {\n    return false;\n  } else if (\n    !equal(prevProps.data?.['last_updated'], currProps.data?.['last_updated'])\n  ) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.regionHighlighted.districtName,\n      currProps.regionHighlighted.districtName\n    ) &&\n    (equal(prevProps.regionHighlighted.districtName, prevProps.districtName) ||\n      equal(currProps.regionHighlighted.districtName, currProps.districtName))\n  ) {\n    return false;\n  }\n  return true;\n};\nconst DistrictRow = React.memo(PureDistrictRow, isDistrictRowEqual);\n\nfunction Row({stateCode, data, regionHighlighted, setRegionHighlighted}) {\n  const [showDistricts, setShowDistricts] = useState(false);\n  const [sortData, setSortData] = useLocalStorage('districtSortData', {\n    sortColumn: 'confirmed',\n    isAscending: false,\n  });\n\n  const history = useHistory();\n  const {t} = useTranslation();\n\n  const Chevron = useMemo(\n    () => (\n      <span\n        className={classnames(\n          'dropdown',\n          {rotateRightDown: showDistricts},\n          {rotateDownRight: !showDistricts}\n        )}\n      >\n        <Icon.ChevronDown />\n      </span>\n    ),\n    [showDistricts]\n  );\n\n  const handleSortClick = useCallback(\n    (statistic) => {\n      setSortData(\n        produce(sortData, (draftSortData) => {\n          draftSortData.isAscending = !sortData.isAscending;\n          draftSortData.sortColumn = statistic;\n        })\n      );\n    },\n    [sortData, setSortData]\n  );\n\n  const sortingFunction = useCallback(\n    (districtNameA, districtNameB) => {\n      if (sortData.sortColumn !== 'districtName') {\n        return sortData.isAscending\n          ? getStatistic(\n              data.districts[districtNameA],\n              'total',\n              sortData.sortColumn\n            ) -\n              getStatistic(\n                data.districts[districtNameB],\n                'total',\n                sortData.sortColumn\n              )\n          : getStatistic(\n              data.districts[districtNameB],\n              'total',\n              sortData.sortColumn\n            ) -\n              getStatistic(\n                data.districts[districtNameA],\n                'total',\n                sortData.sortColumn\n              );\n      } else {\n        return sortData.isAscending\n          ? districtNameA.localeCompare(districtNameB)\n          : districtNameB.localeCompare(districtNameA);\n      }\n    },\n    [sortData, data]\n  );\n\n  const highlightState = useCallback(() => {\n    if (regionHighlighted.stateCode !== stateCode) {\n      setRegionHighlighted(\n        produce(regionHighlighted, (draftRegionHighlighted) => {\n          draftRegionHighlighted.stateCode = stateCode;\n          draftRegionHighlighted.districtName = null;\n        })\n      );\n    }\n  }, [regionHighlighted, setRegionHighlighted, stateCode]);\n\n  const _setShowDistrict = useCallback(() => {\n    if (data.districts) {\n      setShowDistricts(!showDistricts);\n    }\n  }, [showDistricts, data]);\n\n  return (\n    <React.Fragment>\n      <tr\n        className={classnames(\n          'state',\n          {'is-total': stateCode === 'TT'},\n          {'is-highlighted': regionHighlighted?.stateCode === stateCode}\n        )}\n        onMouseEnter={highlightState}\n        onClick={_setShowDistrict}\n      >\n        <td>\n          <div className=\"title-chevron\">\n            {stateCode !== 'TT' && Chevron}\n            <span className=\"title-icon\">\n              {t(STATE_NAMES[stateCode])}\n\n              {data?.meta?.notes && (\n                <Tooltip\n                  className=\"tooltip\"\n                  aria-label={data.meta.notes}\n                  wrap={true}\n                  direction={'e'}\n                  noDelay={true}\n                >\n                  <InfoIcon size={'small'} />\n                </Tooltip>\n              )}\n            </span>\n          </div>\n        </td>\n\n        {PRIMARY_STATISTICS.map((statistic) => (\n          <Cell key={statistic} {...{data, statistic}} />\n        ))}\n      </tr>\n\n      {showDistricts && (\n        <React.Fragment>\n          <tr className=\"is-spacer\">\n            <td colSpan={5}>\n              <p />\n            </td>\n          </tr>\n\n          <tr className={'state-last-update'}>\n            <td colSpan={4} style={{paddingBottom: 0}}>\n              <p className=\"spacer\"></p>\n              {data?.meta?.['last_updated'] && (\n                <p>\n                  {`Last updated ${formatLastUpdated(\n                    data.meta.last_updated\n                  )} ${t('ago')}`}\n                </p>\n              )}\n              {data.districts['Unknown'] && (\n                <div className=\"disclaimer\">\n                  <Icon.AlertCircle />\n                  {t('District-wise numbers are under reconciliation')}\n                </div>\n              )}\n            </td>\n            <td\n              align=\"center\"\n              className=\"state-page-link\"\n              colSpan={1}\n              style={{width: '1.5rem'}}\n              onClick={() => {\n                history.push(`state/${stateCode}`);\n              }}\n            >\n              {t('See more details on {{state}}', {\n                state: t(STATE_NAMES[stateCode]),\n              })}\n            </td>\n          </tr>\n\n          <tr className={classnames('district-heading')}>\n            <td onClick={() => handleSortClick('districtName')}>\n              <div className=\"heading-content\">\n                <abbr title=\"District\">{t('District')}</abbr>\n                {sortData.sortColumn === 'districtName' && (\n                  <div>\n                    {sortData.isAscending && <TriangleDownIcon />}\n                    {!sortData.isAscending && <TriangleUpIcon />}\n                  </div>\n                )}\n              </div>\n            </td>\n\n            {PRIMARY_STATISTICS.map((statistic) => (\n              <DistrictHeaderCell\n                key={statistic}\n                {...{statistic, sortData, handleSortClick}}\n              />\n            ))}\n          </tr>\n        </React.Fragment>\n      )}\n\n      {showDistricts &&\n        Object.keys(data.districts)\n          .sort((a, b) => sortingFunction(a, b))\n          .map((districtName) => (\n            <DistrictRow\n              key={districtName}\n              {...{\n                districtName,\n                regionHighlighted,\n                setRegionHighlighted,\n                stateCode,\n              }}\n              data={data.districts[districtName]}\n            />\n          ))}\n\n      {showDistricts && (\n        <tr className=\"is-spacer\">\n          <td colSpan={5}>\n            <p />\n          </td>\n        </tr>\n      )}\n    </React.Fragment>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.data?.total, currProps.data?.total)) {\n    return false;\n  } else if (!equal(prevProps.data?.delta, currProps.data?.delta)) {\n    return false;\n  } else if (\n    (!equal(\n      prevProps.regionHighlighted.stateCode,\n      currProps.regionHighlighted.stateCode\n    ) &&\n      equal(prevProps.regionHighlighted.stateCode, prevProps.stateCode)) ||\n    equal(currProps.regionHighlighted.stateCode, currProps.stateCode)\n  ) {\n    return false;\n  } else if (\n    (!equal(\n      prevProps.regionHighlighted.districtName,\n      currProps.regionHighlighted.districtName\n    ) &&\n      equal(\n        prevProps.regionHighlighted.districtName,\n        prevProps.districtName\n      )) ||\n    equal(currProps.regionHighlighted.districtName, currProps.districtName)\n  ) {\n    return false;\n  } else return true;\n};\n\nexport default React.memo(Row, isEqual);\n","import Row from './row';\n\nimport {PRIMARY_STATISTICS} from '../constants';\nimport {capitalize, abbreviate, getStatistic} from '../utils/commonfunctions';\n\nimport {TriangleUpIcon, TriangleDownIcon} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {useCallback} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {Link} from 'react-router-dom';\nimport {useTrail, animated, config} from 'react-spring';\nimport {createBreakpoint, useLocalStorage} from 'react-use';\n\nconst useBreakpoint = createBreakpoint({XL: 1280, L: 768, S: 350});\n\nfunction PureStateHeaderCell({handleSort, sortData, statistic}) {\n  const breakpoint = useBreakpoint();\n  const {t} = useTranslation();\n\n  return (\n    <th onClick={() => handleSort(statistic)}>\n      <div className=\"heading-content\">\n        <abbr\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\n          title={capitalize(statistic)}\n        >\n          {breakpoint === 'S'\n            ? capitalize(statistic.slice(0, 1))\n            : breakpoint === 'L'\n            ? capitalize(abbreviate(statistic))\n            : capitalize(t(statistic))}\n        </abbr>\n        {sortData.sortColumn === statistic && (\n          <div>\n            {sortData.isAscending && <TriangleUpIcon />}\n            {!sortData.isAscending && <TriangleDownIcon />}\n            <div />\n          </div>\n        )}\n      </div>\n    </th>\n  );\n}\n\nconst isStateHeaderCellEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.sortData, currProps.sortData)) {\n    return false;\n  } else {\n    return true;\n  }\n};\n\nconst StateHeaderCell = React.memo(PureStateHeaderCell, isStateHeaderCellEqual);\n\nfunction PureFineprintTop() {\n  const {t} = useTranslation();\n\n  return (\n    <React.Fragment>\n      <h5 className=\"table-fineprint\">\n        {t('Compiled from State Govt. numbers')},{' '}\n        <Link to=\"/about\" style={{color: '#6c757d'}}>\n          {t('know more')}!\n        </Link>\n      </h5>\n    </React.Fragment>\n  );\n}\nconst FineprintTop = React.memo(PureFineprintTop);\n\nfunction Table({data, regionHighlighted, setRegionHighlighted}) {\n  const {t} = useTranslation();\n\n  const [sortData, setSortData] = useLocalStorage('sortData', {\n    sortColumn: 'confirmed',\n    isAscending: false,\n  });\n\n  const handleSortClick = useCallback(\n    (statistic) => {\n      setSortData(\n        produce(sortData, (draftSortData) => {\n          draftSortData.isAscending = !sortData.isAscending;\n          draftSortData.sortColumn = statistic;\n        })\n      );\n    },\n    [sortData, setSortData]\n  );\n\n  const sortingFunction = useCallback(\n    (stateCodeA, stateCodeB) => {\n      if (sortData.sortColumn !== 'stateName') {\n        const statisticA = getStatistic(\n          data[stateCodeA],\n          'total',\n          sortData.sortColumn\n        );\n        const statisticB = getStatistic(\n          data[stateCodeB],\n          'total',\n          sortData.sortColumn\n        );\n        return sortData.isAscending\n          ? statisticA - statisticB\n          : statisticB - statisticA;\n      } else {\n        return sortData.isAscending\n          ? stateCodeA.localeCompare(stateCodeB)\n          : stateCodeB.localeCompare(stateCodeA);\n      }\n    },\n    [sortData, data]\n  );\n\n  const [trail, set] = useTrail(2, () => ({\n    transform: 'translate3d(0, 10px, 0)',\n    opacity: 0,\n    config: config.wobbly,\n  }));\n\n  set({transform: 'translate3d(0, 0px, 0)', opacity: 1});\n\n  return (\n    <React.Fragment>\n      <animated.span style={trail[0]}>\n        <FineprintTop />\n      </animated.span>\n\n      <animated.table className=\"table\" style={trail[1]}>\n        <thead>\n          <tr>\n            <th\n              className=\"state-heading\"\n              onClick={() => handleSortClick('stateName')}\n            >\n              <div className=\"heading-content\">\n                <abbr title=\"State\">{t('State/UT')}</abbr>\n                {sortData.sortColumn === 'stateName' && (\n                  <div>\n                    {sortData.isAscending && <TriangleDownIcon />}\n                    {!sortData.isAscending && <TriangleUpIcon />}\n                  </div>\n                )}\n              </div>\n            </th>\n            {PRIMARY_STATISTICS.map((statistic) => (\n              <StateHeaderCell\n                key={statistic}\n                {...{statistic, sortData}}\n                handleSort={() => {\n                  handleSortClick(statistic);\n                }}\n              />\n            ))}\n          </tr>\n        </thead>\n\n        <tbody>\n          {Object.keys(data)\n            .filter(\n              (stateCode) =>\n                stateCode !== 'TT' && data[stateCode].total?.confirmed\n            )\n            .sort((a, b) => sortingFunction(a, b))\n            .map((stateCode) => {\n              return (\n                <Row\n                  key={stateCode}\n                  data={data[stateCode]}\n                  {...{stateCode, regionHighlighted, setRegionHighlighted}}\n                />\n              );\n            })}\n        </tbody>\n\n        <tbody>\n          <Row\n            key={'TT'}\n            data={data['TT']}\n            stateCode={'TT'}\n            {...{regionHighlighted, setRegionHighlighted}}\n          />\n        </tbody>\n      </animated.table>\n    </React.Fragment>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (\n    !equal(\n      prevProps.regionHighlighted.districtName,\n      currProps.regionHighlighted.districtName\n    )\n  ) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.regionHighlighted.stateCode,\n      currProps.regionHighlighted.stateCode\n    )\n  ) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.data['TT'].total.confirmed,\n      currProps.data['TT'].total.confirmed\n    )\n  ) {\n    return false;\n  } else return true;\n};\n\nexport default React.memo(Table, isEqual);\n","import produce from 'immer';\nimport {useState} from 'react';\nimport {useUpdateEffect} from 'react-use';\nimport useSWR from 'swr';\n\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n\n  const {data, isValidating, error, ...rest} = useSWR(\n    key,\n    fetcher,\n    options,\n    ...args\n  );\n\n  useUpdateEffect(() => {\n    setOptions(\n      produce(options, (draftOptions) => {\n        draftOptions.initialData = data;\n      })\n    );\n  }, [data]);\n\n  return {\n    ...rest,\n    isValidating,\n    error,\n    data,\n  };\n}\n\nexport default useStickySWR;\n","import Actions from './actions';\nimport Footer from './footer';\nimport Level from './level';\nimport MapExplorer from './mapexplorer';\nimport Minigraph from './minigraph';\nimport Search from './search';\nimport Table from './table';\nimport TimeSeriesExplorer from './timeseriesexplorer';\n\nimport 'intersection-observer';\n\nimport {MAP_META} from '../constants';\nimport useStickySWR from '../hooks/usestickyswr';\nimport {fetcher} from '../utils/commonfunctions';\n\nimport React, {useState, useRef} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {useIsVisible} from 'react-is-visible';\n\nfunction Home(props) {\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    stateCode: 'TT',\n    districtName: null,\n  });\n\n  const [anchor, setAnchor] = useState(null);\n  const [mapStatistic, setMapStatistic] = useState('confirmed');\n\n  const [date, setDate] = useState('');\n\n  const {data: timeseries} = useStickySWR(\n    'https://api.covid19india.org/v3/min/timeseries.min.json',\n    fetcher,\n    {\n      revalidateOnFocus: false,\n    }\n  );\n\n  const {data} = useStickySWR(\n    `https://api.covid19india.org/v3/min/data${\n      date ? `-${date}` : ''\n    }.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: 100000,\n      revalidateOnFocus: false,\n    }\n  );\n\n  const homeRightElement = useRef();\n  const isVisible = useIsVisible(homeRightElement, {once: true});\n\n  const stateCodes = [\n    'TT',\n    ...[\n      ...new Set([\n        ...Object.keys(MAP_META).filter((stateCode) => stateCode !== 'TT'),\n        ...Object.keys(data || {}).filter((stateCode) => stateCode !== 'TT'),\n      ]),\n    ].sort(),\n  ];\n\n  return (\n    <React.Fragment>\n      {data && timeseries && (\n        <div className=\"Home\">\n          <Helmet>\n            <title>Coronavirus Outbreak in India - covid19india.org</title>\n            <meta\n              name=\"title\"\n              content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\n            />\n          </Helmet>\n\n          <div className=\"home-left\">\n            <div className=\"header\">\n              <Search />\n\n              <Actions\n                {...{\n                  setDate,\n                  dates: Object.keys(timeseries['TT']).reverse(),\n                  date,\n                }}\n              />\n            </div>\n\n            <Level data={data['TT']} />\n            <Minigraph timeseries={timeseries['TT']} {...{date}} />\n            <Table {...{data, regionHighlighted, setRegionHighlighted}} />\n          </div>\n\n          <div className=\"home-right\" ref={homeRightElement}>\n            {isVisible && (\n              <React.Fragment>\n                <MapExplorer\n                  stateCode=\"TT\"\n                  {...{data}}\n                  {...{mapStatistic, setMapStatistic}}\n                  {...{regionHighlighted, setRegionHighlighted}}\n                  {...{anchor, setAnchor}}\n                />\n\n                <TimeSeriesExplorer\n                  timeseries={timeseries[regionHighlighted.stateCode]}\n                  {...{date, stateCodes}}\n                  {...{regionHighlighted, setRegionHighlighted}}\n                  {...{anchor, setAnchor}}\n                />\n              </React.Fragment>\n            )}\n          </div>\n        </div>\n      )}\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}